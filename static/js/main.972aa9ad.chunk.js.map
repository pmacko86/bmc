{"version":3,"sources":["Styles.tsx","InstructionsBar.tsx","TopBar.tsx","BookActionScreen.tsx","Draggable.tsx","SvgTransform.tsx","SvgText.tsx","MeasureComponents.tsx","SvgTextComponent.tsx","BmcDiagram.tsx","BmcData.tsx","DiagramScreen.tsx","BookChooser.tsx","HomeScreen.tsx","FirstLetterTextInput.tsx","BmcTextInput.tsx","MyKeyboardAvoidingView.tsx","StudyScreen.tsx","TestScreen.tsx","App.tsx","index.js"],"names":["STYLES","StyleSheet","create","headerBackView","backgroundColor","borderColor","borderWidth","margin","headerBackText","color","padding","headerTitle","paddingBottom","paddingLeft","paddingTop","headerView","instructions","paddingRight","testView","bmcTextChapter","width","testWarningMessage","actionList","actionListItem","studyHeadingStyle","fontWeight","studyCorrectStyle","textDecorationLine","studyUnseenStyle","InstructionsBar","Text","style","selectable","this","props","text","React","Component","TopBar","handleBack","bind","event","stopPropagation","preventDefault","Platform","OS","onBackIfWeb","navigation","goBack","View","flexDirection","hideBack","TouchableHighlight","onPress","BookActionScreen","state","action","bookName","getParam","navigate","book","SafeAreaView","flex","ScrollView","e","chooseAction","Draggable","ref","scale","deltaPosition","dropLocationScale","panResponder","x","y","pan","Animated","ValueXY","addListener","value","setValue","undefined","updatePanHandlers","gestureX","gestureY","relativeX","relativeY","draggableWidth","draggableHeight","dropLocation","Array","isArray","length","spring","toValue","friction","start","gx","gy","dropLocations","i","dlx","dly","dlw","dlh","height","adjustDropLocationToScale","midpointY","extraW","extraH","onDropToLocation","speed","onAfterInvalidDrop","prevProps","disabled","PanResponder","onStartShouldSetPanResponder","gesture","onDragStart","onPanResponderMove","dx","dy","onPanResponderRelease","onDragStop","moveX","moveY","measure","textX","textY","textW","textH","textPX","textPY","dropLocationRelative","w","h","px","py","onRelease","conf","onCompletion","callback","panHandlers","transform","getTranslateTransform","position","left","top","r","children","SvgTransform","matrix","math","second","clone","p0","p1","v","get","yy","s","parts","split","fn","params","parseFloat","then","fromTranslate","fromScale","DEFAULT_FONT_SIZE","SvgTextSpan","attrs","origin","fontFamily","fontSize","fontSizeScaled","textLength","letterSpacing","computedLetterSpacing","measuredWidth","layout","subTextParentSpan","subTextSpans","fill","setTransform","vectorOne","apply","Math","sqrt","key","ignoreLocation","asHint","effectiveLetterSpacing","textShadowColor","textShadowOffset","textShadowRadius","replace","SvgText","svg","location","textSpans","testLocation","testAlternative","diagramAlternative","draggable","index","equivalents","subTextParent","subTextFrom","subTextTo","subTexts","premeasure","onPremeasure","extractText","extractTextSpans","finishInitialization","locationTransform","transformSoFar","textAttrs","parse","type","name","childs","a","Object","assign","keys","k","map","c","push","firstSpan","t","reduce","forEach","max","slice","from","substr","pos","shiftLeft","span","f","currentPos","currentShiftLeft","console","warn","min","newSpan","skip","subText","sort","b","other","locationTransformForThis","abs","locationTransformForOther","thisX1","thisY1","thisX2","thisY2","otherX1","otherY1","otherX2","otherY2","renderNative","MeasureComponents","layouts","count","remaining","Children","d","nativeEvent","done","onMeasure","justifyContent","alignItems","overflow","child","onLayout","l","handleOnLayout","SvgTextComponent","spanLayouts","overallLayout","overall","p","j","setState","handleMeasure","DATA","require","BmcTestLayout","basePosition","borderSize","extraHeight","extraWidth","marginSize","supportsScroll","right","bottom","texts","alreadyRemoved","BmcTestLayoutTouchScroll","svgViewBox","tx","ty","widest","nextIndex","textCurrent","textNext","last","tj","resetPan","BMC_DIAGRAM_TEXT_EXCEPTIONS","BmcDiagram","svgView","exemptedTexts","premeasureTexts","testLayout","testLayoutSupportsScroll","testScrollEnabled","scrollOffset","diagramScale","diagramScaleLast","testScale","testScaleLast","diagramTranslate","diagramMaxHeight","lastLayoutChangeEvent","lastExtraWidth","viewBox","allTexts","extractSvgText","flat","isExempted","prepareTestComponentsBeforeMeasure","correctTextLocation","testMode","Value","match","includes","splitWithDelimiters","startsWith","endsWith","n","filter","deleted","Map","set","startX","merge","collator","Intl","Collator","numeric","sensitivity","compare","doLayout","hasTestLayouts","prepareTestComponentsAfterMeasure","doTestLayout","indexOf","renderSvg","totalWidth","remainingWidth","scaledSvgWidth","scaledSvgHeight","maxHeight","totalHeight","handleLayoutChangeEvent","Dimensions","flexGrow","flexShrink","translateX","translateY","testHints","scrollEnabled","scrollEventThrottle","onScroll","listener","contentOffset","multiply","atTestLocation","myScale","myPaddingTop","myPaddingBottom","myPaddingLeft","myPaddingRight","backgroundColorOpacity","interpolate","inputRange","outputRange","dropLocationIndex","handleComponentRemoved","marginTop","marginBottom","marginLeft","marginRight","finishedPremeasure","handleSvgTextComponentLayout","BMC_DATA","contents","title","items","chapter","part","label","heading","notes","StudyScreen","BMC","find","BookChooser","item","onChoose","HomeScreen","bookItems","handleBookChoose","FIRST_LETTER_SYNONYMS","synonyms","unidirectional","FirstLetterTextInput","words","input","editlockLocked","editlockTimeMS","editlockTimeoutMS","editlockTimeoutSafetyMS","textParts","charAt","word","byLetter","showOnlyIfTriggered","optional","optionalWords","toLowerCase","charIndex","correct","triggered","keyPressCount","handlePress","handleChange","handleKeyPress","suppressTopBackspace","onTopBackspace","prevWord","focus","handleKey","Date","getTime","setTimeout","correctState","to","triggeredState","wasCorrect","reachedEnd","wordLowerCase","originalIndex","originalCharIndex","findNextCharacter","nextWordCharacter","nextWordCharacterIndex","nextNextWordCharacter","nextNextWordCharacterIndex","matches","forceAdvanceToNextWord","allowSynonyms","m","updateCorrectState","nextWord","doNextWord","temporaryEventLock","allowBackspace","backspace","onBackspace","onCorrectInput","onIncorrectInput","isAndroidWeb","navigator","userAgent","readOnly","platformDependentProps","autoCompleteType","incorrect","unseen","TouchableWithoutFeedback","viewStyle","flexWrap","correctStyle","incorrectStyle","TextInput","onKeyPress","onChange","autoCorrect","autoFocus","editable","selectTextOnFocus","caretHidden","maxLength","secureTextEntry","textContentType","autoCapitalize","fromIndex","displayAll","minWidth","unseenStyle","BmcTextInput","elements","isHeading","addSpace","previousIndex","headingStyle","displayAllTextInItem","everythingEditable","element","displayAllItems","createInput","withChapter","textAlign","MyKeyboardAvoidingView","KeyboardAvoidingView","behavior","keyboardShouldPersistTaps","TestScreen","shakeAnimation","incorrectStreak","RIGHT","duration","useNativeDriver","LEFT","sequence","timing","shake","routes","Home","screen","BookAction","Diagram","DiagramScreen","Study","Test","MainNavigator","createSwitchNavigator","backBehavior","App","createBrowserApp","history","ReactDom","render","document","getElementById"],"mappings":"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,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,eAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4DAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gEAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+BAKgB,CAC3BJ,MAAO,SACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,SAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,UAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,SAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,UAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,SAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gEAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,QAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,SAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,SAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,eAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mFAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4DAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAKmB,CAC9BJ,MAAO,YACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0DAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAKiB,CAC5BJ,MAAO,UACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,4DAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,6CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,aAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,+BAET,CACEF,QAAS,QACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,QAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oEAMqB,CAChCJ,MAAO,cACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNE,QAAS,qBACTD,MAAO,YAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kEAGT,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNE,QAAS,oBACTD,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,SAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,eAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kEAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNE,QAAS,uBACTD,MAAO,eAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,2DAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,UAET,CACEF,QAAS,GACTC,KAAM,KACNE,QAAS,iCACTD,MAAO,UAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAKgB,CAC3BJ,MAAO,SACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,eAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAKgB,CAC3BJ,MAAO,SACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,0CAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,gCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,cAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sCAKc,CACzBJ,MAAO,OACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,yEAGT,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,4CAKkB,CAC7BJ,MAAO,WACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,eAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAKkB,CAC7BJ,MAAO,WACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kEAKiB,CAC5BJ,MAAO,UACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,SAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,uCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAKiB,CAC5BJ,MAAO,UACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,0CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,UAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,2BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,8BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,QAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,WAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,eAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,gDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,QAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAKsB,CACjCJ,MAAO,eACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,cAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8DAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uCAKsB,CACjCJ,MAAO,eACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,cAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,YAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,UAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,QAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oEAMiB,CAC5BJ,MAAO,UACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,6BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,eAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,eAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,kBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,SAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,QAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,wCAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,YAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,iBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,eAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,cAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,+BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,aAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,SAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,iBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kHAIT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,WAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,6BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,4CAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,+BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,UAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mFAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oCAKc,CACzBJ,MAAO,OACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,4DAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,YAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,oCAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,0BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,6BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,4BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,mCAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,4CAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,+BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,gBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,4CAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,cAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kFAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mFAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+CAKc,CACzBJ,MAAO,OACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,wCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,+CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,wCAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,SAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,YAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,oBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,0BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,4BAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,+CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,2DAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iDAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,aAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,kDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oEAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6CAKc,CACzBJ,MAAO,OACPM,MAAO,CACL,oCAEFL,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,IACNC,MAAO,wBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,wDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,6CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAKc,CACzBJ,MAAO,OACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,6EAGT,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oEAGT,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,2BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iCAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,+CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,6CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,2DAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,qDAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,gGAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yHAIT,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,4FAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iFAGT,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,2CAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,2BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,gBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,SAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,UAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kGAGT,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kFAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,sCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,6FAGT,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,0CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,iEAGT,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,gCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wEAGT,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,wBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,0CAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,kEAGT,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,8CAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,0BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oDAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,yBAET,CACEF,QAAS,GACTC,KAAM,IACNC,MAAO,uDAKgB,CAC3BJ,MAAO,SACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNE,QAAS,kBACTD,MAAO,iBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,aAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNE,QAAS,wBACTD,MAAO,4BAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,EACTC,KAAM,KACNE,QAAS,6BACTD,MAAO,WAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,OAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,UAET,CACEF,QAAS,EACTC,KAAM,KACNE,QAAS,sBACTD,MAAO,iBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNE,QAAS,qBACTD,MAAO,iCAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,8BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,oCAET,CACEF,QAAS,GACTC,KAAM,KACNE,QAAS,GACTD,MAAO,WAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,eAKoB,CAC/BJ,MAAO,aACPC,MAAO,CACL,CACEC,QAAS,EACTC,KAAM,KACNC,MAAO,uBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,4DAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sDAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,iBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,sBAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,4CAET,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,gEAGT,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oEAGT,CACEF,QAAS,EACTC,KAAM,KACNC,MAAO,oDAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,qBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,mBAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,4BAET,CACEF,QAAS,GACTC,KAAM,KACNC,MAAO,cAET,CACEF,QAAS,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","file":"static/js/main.972aa9ad.chunk.js","sourcesContent":["import { StyleSheet } from 'react-native';\n\nconst STYLES = StyleSheet.create({\n  headerBackView: {\n    backgroundColor: \"#222\",\n    borderColor: \"#aaa\",\n    borderWidth: 1,\n    margin: 4,\n  },\n  headerBackText: {\n    color: \"#aaa\",\n    padding: 8,\n  },\n  headerTitle: {\n    color: \"#fff\",\n    paddingBottom: 13,\n    paddingLeft: 12,\n    paddingTop: 13,\n  },\n  headerView: {\n    backgroundColor: \"#000\",\n    padding: 4,\n  },\n  instructions: {\n    backgroundColor: \"#ccc\",\n    color: \"#000\",\n    paddingTop: 4,\n    paddingBottom: 4,\n    paddingLeft: 8,\n    paddingRight: 4,\n  },\n  testView: {\n    backgroundColor: \"#fff\",\n    padding: 4,\n  },\n  bmcTextChapter: {\n    paddingTop: 4,\n    width: 55,\n  },\n  testWarningMessage: {\n    color: \"red\",\n    paddingTop: 15,\n    paddingLeft: 55,\n  },\n  actionList: {\n    backgroundColor: \"#fff\",\n    padding: 4,\n  },\n  actionListItem: {\n    color: \"#000\",\n    padding: 4,\n  },\n  studyHeadingStyle: {\n    color: \"#000\",\n    fontWeight: \"bold\",\n  },\n  studyCorrectStyle: {\n    color: \"#040\",\n    textDecorationLine: \"underline\",\n  },\n  studyUnseenStyle: {\n    color: \"#000\",\n  },\n});\n\nexport default STYLES;\n","import React from 'react';\nimport { Text } from 'react-native';\nimport STYLES from './Styles';\n\n\ntype InstructionsBarProps = {\n  text: string;\n}\n\n\ntype InstructionsBarState = {\n}\n\n\nexport default class InstructionsBar\nextends React.Component<InstructionsBarProps, InstructionsBarState> {\n\n  render() {\n    return (\n      <Text\n        style={STYLES.instructions}\n        selectable={false}\n        >{this.props.text}</Text>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  GestureResponderEvent,\n  Text,\n  Platform,\n  TouchableHighlight,\n  View\n} from 'react-native';\nimport { NavigationStackProp } from 'react-navigation-stack';\nimport STYLES from './Styles';\n\n\ntype TopBarProps = {\n  navigation: NavigationStackProp;\n  hideBack?: boolean;\n  text: string;\n  onBackIfWeb?: () => void;\n}\n\n\ntype TopBarState = {\n}\n\n\nexport default class TopBar\nextends React.Component<TopBarProps, TopBarState> {\n\n  constructor(props: TopBarProps) {\n    super(props);\n    this.handleBack = this.handleBack.bind(this);\n  }\n\n\n  handleBack(event: GestureResponderEvent) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (Platform.OS === \"web\" && this.props.onBackIfWeb) {\n      this.props.onBackIfWeb();\n    }\n    else {\n      this.props.navigation.goBack();\n    }\n  }\n\n\n  render() {\n    return (\n      <View\n        style={[STYLES.headerView, {\n          flexDirection: \"row\",\n        }]}\n        >\n        {this.props.hideBack ? null :\n          <TouchableHighlight onPress={this.handleBack}>\n            <View style={STYLES.headerBackView}>\n              <Text\n                style={STYLES.headerBackText}\n                selectable={false}\n                >&lt; Back</Text>\n            </View>\n          </TouchableHighlight>}\n        <Text\n          style={STYLES.headerTitle}\n          selectable={false}\n          >{this.props.text}</Text>\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  SafeAreaView,\n  ScrollView,\n  TouchableHighlight,\n  Text,\n} from 'react-native';\nimport { NavigationStackProp } from 'react-navigation-stack';\nimport InstructionsBar from './InstructionsBar';\nimport TopBar from './TopBar';\nimport STYLES from './Styles';\n\ntype BookActionScreenProps = {\n  navigation: NavigationStackProp<{ book: string }>;\n}\n\ntype BookActionScreenState = {\n}\n\nexport default class BookActionScreen\nextends React.Component<BookActionScreenProps, BookActionScreenState> {\n\n  constructor(props: BookActionScreenProps) {\n    super(props);\n    this.state = {}\n  }\n\n\n  chooseAction(action: string) {\n    const bookName = this.props.navigation.getParam(\"book\");\n    this.props.navigation.navigate(action, { book: bookName });\n  }\n\n\n  render() {\n    const bookName = this.props.navigation.getParam(\"book\");\n    return (\n      <SafeAreaView style={{ flex: 1 }}>\n        <TopBar\n          navigation={this.props.navigation as unknown as NavigationStackProp}\n          text={bookName}\n          onBackIfWeb={() => this.props.navigation.navigate(\"Home\")}\n          />\n        <InstructionsBar\n          text={\"What would you like to do?\"} />\n        <ScrollView style={STYLES.actionList}>\n          <TouchableHighlight onPress={e => this.chooseAction(\"Study\")}>\n            <Text style={STYLES.actionListItem}>Study</Text>\n          </TouchableHighlight>\n          <TouchableHighlight onPress={e => this.chooseAction(\"Diagram\")}>\n            <Text style={STYLES.actionListItem}>Test the Diagram [experimental]</Text>\n          </TouchableHighlight>\n          <TouchableHighlight onPress={e => this.chooseAction(\"Test\")}>\n            <Text style={STYLES.actionListItem}>Test the Chapter Titles</Text>\n          </TouchableHighlight>\n        </ScrollView>\n      </SafeAreaView>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  Animated,\n  MeasureOnSuccessCallback,\n  LayoutRectangle,\n  PanResponder,\n  PanResponderInstance,\n  Text,\n  View,\n  ViewStyle,\n} from \"react-native\";\n\n\n/**\n * Point coordinates.\n */\ntype XY = {\n  x: number;\n  y: number;\n}\n\n\ntype DraggableProps = {\n  adjustDropLocationToScale?: boolean;\n  disabled?: boolean;\n  dropLocation?: LayoutRectangle | LayoutRectangle[];\n  dropLocationScale?: number | Animated.Value,\n  dropLocationRelative?: View | Text | null;\n  onDragStart?: () => void;\n  onDragStop?: () => void;\n  onDropToLocation?: (index: number) => void;\n  onAfterInvalidDrop?: () => void;\n  scale?: number | Animated.Value;\n  style: ViewStyle;\n}\n\n\ntype DraggableState = {\n  pan: Animated.ValueXY;\n}\n\n\n/**\n * A draggable element.\n */\nexport default class Draggable\nextends React.Component<DraggableProps, DraggableState> {\n\n  ref: View | null;\n\n  scale: number;\n  deltaPosition: XY;\n  dropLocationScale: number;\n  panResponder: PanResponderInstance | undefined;\n\n\n  /**\n   * The constructor.\n   *\n   * @param [DraggableProps] props the properties\n   */\n  constructor(props: DraggableProps) {\n    super(props);\n    this.deltaPosition = { x: 0, y: 0 };\n    this.ref = null;\n    this.state = { pan: new Animated.ValueXY() };\n    this.state.pan.addListener((value) => this.deltaPosition = value);\n    this.state.pan.setValue({ x: 0, y: 0 });\n\n    if (this.props.scale === undefined) {\n      this.scale = 1;\n    }\n    else if (typeof(this.props.scale) == \"number\") {\n      this.scale = this.props.scale as number;\n    }\n    else {\n      this.scale = 1;\n      this.props.scale.addListener((e) => this.scale = e.value);\n    }\n\n    if (this.props.dropLocationScale === undefined) {\n      this.dropLocationScale = 1;\n    }\n    else if (typeof(this.props.dropLocationScale) == \"number\") {\n      this.dropLocationScale = this.props.dropLocationScale as number;\n    }\n    else {\n      this.dropLocationScale = 1;\n      this.props.dropLocationScale.addListener(\n        (e) => this.dropLocationScale = e.value);\n    }\n\n    this.updatePanHandlers();\n  }\n\n\n  /**\n   * The handle on drag release.\n   *\n   * @param [number] gestureX the X coordinate of the release\n   * @param [number] gestureY the Y coordinate of the release\n   * @param [number] relativeX the delta to apply to the X coordinate\n   * @param [number] relativeY the delta to apply to the Y coordinate\n   * @param [number] draggableWidth the width of the component\n   * @param [number] draggableHeight the height of the component\n   */\n  onRelease(gestureX: number, gestureY: number,\n    relativeX: number, relativeY: number,\n    draggableWidth: number, draggableHeight: number) {\n\n    if (!this.props.dropLocation\n      || (Array.isArray(this.props.dropLocation)\n        && this.props.dropLocation.length === 0)) {\n      Animated.spring(this.state.pan, {\n        toValue: { x: 0, y: 0 },\n        friction: 10\n      }).start();\n      return;\n    }\n\n    const gx = gestureX;\n    const gy = gestureY;\n\n    let dropLocations = Array.isArray(this.props.dropLocation)\n      ? this.props.dropLocation : [this.props.dropLocation];\n\n    for (let i = 0; i < dropLocations.length; i++) {\n      let dlx = dropLocations[i].x * this.dropLocationScale + relativeX;\n      let dly = dropLocations[i].y * this.dropLocationScale + relativeY;\n      let dlw = dropLocations[i].width * this.dropLocationScale;\n      let dlh = dropLocations[i].height * this.dropLocationScale;\n\n      if (this.props.adjustDropLocationToScale) {\n        let midpointX = dlx + dlw / 2;\n        let midpointY = dly + dlh / 2;\n        dlw = dlw / this.dropLocationScale;\n        dlh = dlh / this.dropLocationScale;\n        dlx = midpointX - dlw / 2;\n        dly = midpointY - dlh / 2;\n      }\n\n      if (this.props.adjustDropLocationToScale\n        && this.dropLocationScale < this.scale) {\n        // Adjust for the bottom-right corner\n        let extraW = draggableWidth * (this.scale - this.dropLocationScale);\n        let extraH = draggableHeight * (this.scale - this.dropLocationScale);\n        dlx -= extraW;\n        dlw += extraW;\n        dly -= extraH;\n        dlh += extraH;\n      }\n\n      if (gx >= dlx && gx < dlx + dlw && gy >= dly && gy < dly + dlh) {\n        if (this.props.onDropToLocation) {\n          this.props.onDropToLocation(i);\n        }\n      }\n      else {\n        Animated.spring(this.state.pan, {\n          toValue: { x: 0, y: 0 },\n          //friction: 10,\n          speed: 100,\n        }).start(this.props.onAfterInvalidDrop);\n      }\n    }\n  }\n\n\n  /**\n   * Handler for after new properties were received.\n   *\n   * @param [DraggableProps] prevProps the previous properties\n   */\n  componentDidUpdate(prevProps: DraggableProps) {\n    if (this.props.disabled !== prevProps.disabled) {\n      this.updatePanHandlers();\n    }\n  }\n\n\n  /**\n   * Update the pan handlers.\n   */\n  updatePanHandlers() {\n    if (!this.props.disabled) {\n      this.panResponder = PanResponder.create({\n        onStartShouldSetPanResponder: (e, gesture) => {\n          if (this.props.onDragStart) {\n            this.props.onDragStart();\n          }\n          return true;\n        },\n        onPanResponderMove: (e, gesture) => {\n          // Animated.event([ null,\n          //   { dx: this.state.pan.x, dy: this.state.pan.y, } ]),\n          this.state.pan.x.setValue(gesture.dx / this.scale);\n          this.state.pan.y.setValue(gesture.dy / this.scale);\n        },\n        onPanResponderRelease: (e, gesture) => {\n          if (this.props.onDragStop) {\n            this.props.onDragStop();\n          }\n          const gx = gesture.moveX * this.scale;\n          const gy = gesture.moveY * this.scale;\n          if (this.ref) {\n            this.ref.measure((textX, textY, textW, textH, textPX, textPY) => {\n              const dx = gx - textPX;\n              const dy = gy - textPY;\n              if (this.props.dropLocationRelative) {\n                this.props.dropLocationRelative.measure(\n                  (x, y, w, h, px, py) => {\n                    this.onRelease(gx, gy, px + dx, py + dy, textW, textH);\n                  }\n                );\n              }\n              else {\n                this.onRelease(gx, gy, dx, dy, textW, textH);\n              }\n            });\n          }\n        }\n      });\n    }\n    else {\n      this.panResponder = PanResponder.create({});\n      this.state.pan.setValue({ x: 0, y: 0 });\n    }\n  }\n\n\n  /**\n   * Perform a spring animation\n   */\n  spring(conf: Animated.SpringAnimationConfig,\n    onCompletion?: Animated.EndCallback) {\n    if (this.state.pan) {\n      Animated.spring(this.state.pan, conf).start(onCompletion);\n    }\n  }\n\n\n  /**\n   * Reset the pan value\n   */\n  resetPan() {\n    if (this.state.pan) {\n      this.state.pan.setValue({ x: 0, y: 0 });\n    }\n  }\n\n\n  /**\n   * Measure\n   */\n  measure(callback: MeasureOnSuccessCallback) {\n    if (this.ref) {\n      this.ref.measure(callback);\n    }\n  }\n\n\n  /**\n   * Render the component.\n   *\n   * @return [Animated.View] the rendered component.\n   */\n  render() {\n    let panHandlers = this.panResponder ? this.panResponder.panHandlers : {};\n    return (\n      <Animated.View\n        style={{\n          transform: this.state.pan.getTranslateTransform(),\n          // @ts-ignore\n          position: this.props.style.position,\n          // @ts-ignore\n          left: this.props.style.left,\n          // @ts-ignore\n          top: this.props.style.top,\n        }}\n        {...panHandlers}>\n        <View ref={r => { this.ref = r; }}>\n          {this.props.children}\n        </View>\n      </Animated.View>);\n  }\n}\n","import * as math from \"mathjs\";\n\n\n/**\n * Point coordinates.\n */\ntype XY = {\n  x: number;\n  y: number;\n}\n\n\n/**\n * Class representing SVG transform.\n *\n * All instances of this class are immutable.\n */\nexport default class SvgTransform {\n  matrix: math.Matrix;\n\n\n  /**\n   * Create a new instance of the class.\n   *\n   * @param [math.Matrix] the 3x3 transform matrix.\n   */\n  constructor(matrix?: math.Matrix) {\n    if (matrix) {\n      this.matrix = matrix;\n    }\n    else {\n      this.matrix = math.matrix([[1, 0, 0], [0, 1, 0], [0, 0, 1]], \"dense\");\n    }\n  }\n\n\n  /**\n   * Create the class from a translation transform.\n   *\n   * @param [number] x the X delta\n   * @param [number] y the Y delta\n   * @return [SvgTransform] the transform\n   */\n  static fromTranslate(x: number, y: number): SvgTransform {\n    let m = math.matrix([[1, 0, x], [0, 1, y], [0, 0, 1]], \"dense\");\n    return new SvgTransform(m);\n  }\n\n\n  /**\n   * Create the class from a scale transform.\n   *\n   * @param [number] x the X scale (or the overall scale if y is undefined)\n   * @param [number] y the Y scale\n   * @return [SvgTransform] the transform\n   */\n  static fromScale(x: number, y?: number): SvgTransform {\n    let yy = y === undefined ? x : y;\n    let m = math.matrix([[x, 0, 0], [0, yy, 0], [0, 0, 1]], \"dense\");\n    return new SvgTransform(m);\n  }\n\n\n  /**\n   * Clone the object.\n   *\n   * @return [SvgTransform] the cloned object\n   */\n  clone(): SvgTransform {\n    let m = this.matrix;\n    return new SvgTransform(m);\n  }\n\n\n  /**\n   * Combine with another transform.\n   *\n   * @param [SvgTransform | null] second the other transform\n   * @return [SvgTransform] the combined transform\n   */\n  then(second?: SvgTransform | null) {\n    if (second === undefined || second === null) return this.clone();\n    let m = math.multiply(second.matrix, this.matrix) as math.Matrix;\n    return new SvgTransform(m);\n  }\n\n\n  /**\n   * Apply the transform.\n   *\n   * @param [XY] x the input vector.\n   * @return [XY] the output vector.\n   */\n  apply(x: XY): XY;\n\n\n  /**\n   * Apply the transform.\n   *\n   * @param [number] x the X coordinate of the input vector.\n   * @param [number] y the Y coordinate of the input vector.\n   * @return [XY] the output vector.\n   */\n  apply(x: number, y: number): XY;\n\n\n  /**\n   * Apply the transform.\n   *\n   * @param [XY | number] p0 the vector or the X coordinate\n   * @param [number] p1 the Y coordinate\n   * @return [XY] the output vector.\n   */\n  apply(p0: XY | number, p1?: number): XY {\n\n    let x, y;\n    if (typeof p0 === \"number\" && typeof p1 === \"number\") {\n      x = p0;\n      y = p1;\n    }\n    else if (typeof p0 === \"object\") {\n      x = (p0 as XY).x;\n      y = (p0 as XY).y;\n    }\n    else {\n      x = 0;\n      y = 0;\n    }\n\n    let v = math.matrix([[x], [y], [1]]);\n    let r = math.multiply(this.matrix, v) as math.Matrix;\n    let p = { x: r.get([0, 0]), y: r.get([1, 0]) };\n    return p;\n  }\n\n\n  /**\n   * Parse the transform from a string, ignoring all errors.\n   *\n   * @param [string] s the string.\n   * @return [SvgTransform] the transform.\n   */\n  static parse(s: string): SvgTransform {\n    let r = new SvgTransform();\n    let parts = s.split(/\\)[^a-zA-Z0-9]*/);\n    for (let i = 0; i < parts.length; i++) {\n      if (parts[i] === \"\") continue;\n      let [fn, t] = parts[i].split(\"(\", 2);\n      let params = t.split(/ +/);\n      if (fn === \"translate\" && params.length === 2) {\n        let x = parseFloat(params[0]);\n        let y = parseFloat(params[1]);\n        r = r.then(SvgTransform.fromTranslate(x, y));\n      }\n      if (fn === \"scale\" && params.length === 1) {\n        let x = parseFloat(params[0]);\n        r = r.then(SvgTransform.fromScale(x, x));\n      }\n      if (fn === \"scale\" && params.length === 2) {\n        let x = parseFloat(params[0]);\n        let y = parseFloat(params[1]);\n        r = r.then(SvgTransform.fromScale(x, y));\n      }\n    }\n    return r;\n  }\n}\n","import React from 'react';\nimport {\n  LayoutRectangle,\n  Text,\n  View,\n} from \"react-native\";\n\nimport Draggable from './Draggable';\nimport SvgTransform from './SvgTransform';\n\n\n/**\n * The font size to use when there is no size specified.\n */\nconst DEFAULT_FONT_SIZE = 14;\n\n/**\n * The extra text shift\n */\nconst SVG_NATIVE_TEXT_VERTICAL_SHIFT = 4;\nconst SVG_NATIVE_TEXT_HORIZONTAL_SHIFT = -1;\n\n\n/**\n * Point coordinates.\n */\ntype XY = {\n  x: number;\n  y: number;\n}\n\n\n/**\n * A text span\n */\nclass SvgTextSpan {\n\n  text: string;\n  attrs: any;\n  transform: SvgTransform;\n\n  color: string;\n  origin: XY;\n  scale: number;\n  fontFamily: string;\n  fontSize: number;\n  fontSizeScaled: number;\n  fontWeight: number;\n\n  textLength?: number;\n  letterSpacing?: number;\n  computedLetterSpacing?: number;\n  measuredWidth?: number;      // will be filled out asynchronously\n  layout?: LayoutRectangle;    // will be filled out asynchronously\n\n  subTextParentSpan?: SvgTextSpan;\n  subTextSpans: SvgTextSpan[];\n\n\n  /**\n   * The constructor.\n   *\n   * @param [string] text the text\n   * @param [any] attrs the attributes\n   * @param [SvgTransform] transform the transform\n   */\n  constructor(text: string, attrs: any, transform: SvgTransform) {\n\n    this.text = text;\n    this.attrs = attrs;\n    this.subTextSpans = [];\n\n\n    // Initialize transform-related attributes (to fix the compiler warnings)\n\n    this.transform = transform;\n    this.origin = { x: 0, y: 0 };\n    this.scale = 0;\n    this.fontSizeScaled = 0;\n\n\n    // Derrived attributes\n\n    this.color = this.attrs.fill || \"black\";\n    this.fontFamily = this.attrs.fontFamily || \"Helvetica\";\n    this.fontWeight = this.attrs.fontWeight || 400 /* normal */;\n    this.fontSize = this.attrs.fontSize\n      ? parseFloat(this.attrs.fontSize) : DEFAULT_FONT_SIZE;\n      this.textLength = this.attrs.textLength;\n\n\n    // The transform\n\n    this.setTransform(transform);\n\n\n    // If we have textLength, take advantage of it.\n\n    // TODO Currently we don't do this, since we need to measure\n    //      the texts anyways so that we can get measuredWidth for\n    //      the purpose of adjusting letterSpacing. But we should be\n    //      totally taking advantage of this!\n\n    /*if (this.attrs.textLength) {\n      this.layout = {\n        x: this.origin.x,\n        y: this.origin.y,\n        width: this.attrs.textLength,\n        height: this.fontSize + 2,\n      };\n    }*/\n  }\n\n\n  /**\n   * Get the location.\n   *\n   * @return [XY] the location.\n   */\n  get location(): XY {\n    return this.origin;\n  }\n\n\n  /**\n   * Set (update) the transform.\n   *\n   * @param [SvgTransform] transform the new transform.\n   */\n  setTransform(transform: SvgTransform) {\n    this.transform = transform;\n    const vectorOne = this.transform.apply(1, 0);\n    this.origin = this.transform.apply(0, 0);\n    this.scale = Math.sqrt((vectorOne.x - this.origin.x)**2\n      + (vectorOne.y - this.origin.y)**2);\n    this.fontSizeScaled = this.fontSize * this.scale;\n    this.origin.y -= this.fontSizeScaled;\n  }\n\n\n  /**\n   * Clone.\n   *\n   * @return [SvgTextSpan] the cloned span.\n   */\n  clone(): SvgTextSpan {\n    let r = new SvgTextSpan(this.text, this.attrs, this.transform);\n    r.layout = this.layout;\n    return r;\n  }\n\n\n  /**\n   * Get the effective letter spacing.\n   *\n   * @return [number] the effective letter spacing.\n   */\n  effectiveLetterSpacing(): number {\n    if (this.letterSpacing !== undefined) {\n      return this.letterSpacing;\n    }\n    if (this.computedLetterSpacing !== undefined) {\n      return this.computedLetterSpacing;\n    }\n    return 0;\n  }\n\n\n  /**\n   * Render using React Native (not SVG).\n   *\n   * @param [any] key the key.\n   * @param [number] scale the scale.\n   * @param [boolean] ignoreLocation whether to ignore location.\n   * @param [boolean] asHint whether to render this as a hint.\n   * @return [React.Component] the rendered component.\n   */\n  renderNative(key: any, scale: number = 1,\n    ignoreLocation: boolean = false, asHint: boolean = false) {\n\n\n    return (\n      <Text\n        key={key}\n        selectable={false}\n        style={[\n          {\n            color: !asHint ? this.color : \"transparent\",\n            fontFamily: this.fontFamily,\n            fontSize: scale * this.fontSizeScaled,\n            fontWeight: this.fontWeight === 500 ? \"500\" : \"400\", // XXX\n            letterSpacing: this.effectiveLetterSpacing() * scale,\n          },\n          !ignoreLocation ? {\n            position: \"absolute\",\n            left: scale * (this.origin.x + SVG_NATIVE_TEXT_HORIZONTAL_SHIFT),\n            // Everything seems shifted...\n            top: scale * (this.origin.y + SVG_NATIVE_TEXT_VERTICAL_SHIFT),\n          } : {},\n          !asHint ? {} : {\n            textShadowColor: this.color,\n            textShadowOffset: { width: 0, height: 0 },\n            textShadowRadius: scale * this.fontSizeScaled * 2.5 / 3,\n          },\n        ]}\n        >{this.text.replace(/ /g, \"\\u00a0\" /* &nbsp; */)}</Text>\n    );\n  }\n}\n\n\n/**\n * A text component extracted from the SVG, which can consist of zero\n * or more text spans.\n */\nexport default class SvgText {\n\n  //svg: {[key: string]: any};\n  //attrs: any;\n  //transform: SvgTransform;\n  text: string;\n\n  location: XY;\n  fontSize: number;\n  color: string;\n  textSpans: SvgTextSpan[];\n\n  testLocation?: XY;\n  testAlternative?: SvgText;\n  diagramAlternative?: SvgText;\n  layout?: LayoutRectangle;      // will be filled out asynchronously\n  draggable?: Draggable | null;\n\n  index: number;                 // will be filled out asynchronously\n  equivalents: SvgText[];        // will be filled out asynchronously\n\n  subTextParent?: SvgText;\n  subTextFrom: number;\n  subTextTo: number;\n  subTexts: SvgText[];\n\n  premeasure?: SvgText;\n  onPremeasure?: (layout: LayoutRectangle) => void;\n\n\n  /**\n   * The constructor.\n   *\n   * @oaram [{[key: string]: any}] svg the SVG\n   * @param [SvgTransform] transform the transform\n   */\n  constructor(svg: {[key: string]: any}, transform: SvgTransform) {\n\n    //this.svg = svg;\n    //this.transform = transform;\n    //this.attrs = svg.attrs;\n\n    this.text = this.extractText(svg);\n    this.location = transform.apply(0, 0);\n    this.index = -1;\n    this.equivalents = [];\n\n    this.textSpans = [];\n    this.fontSize = DEFAULT_FONT_SIZE;\n    this.color = \"black\";\n    this.subTextFrom = 0;\n    this.subTextTo = 0;\n    this.subTexts = [];\n\n    this.extractTextSpans(svg);\n    this.finishInitialization();\n  }\n\n\n  /**\n   * Extract text spans\n   *\n   * @oaram [{[key: string]: any}] svg the SVG\n   */\n  extractTextSpans(svg: {[key: string]: any}) {\n\n    const locationTransform\n      = SvgTransform.fromTranslate(-this.location.x, -this.location.y);\n    this.textSpans = [];\n\n    const fn = (\n      svg: any,\n      transformSoFar: SvgTransform | null,\n      textAttrs: any | null,\n    ) => {\n\n      // Determine the new transform\n\n      let transform = transformSoFar || new SvgTransform();\n      if (svg.attrs) {\n        if (svg.attrs.transform) {\n          transform = transform.then(SvgTransform.parse(svg.attrs.transform));\n        }\n        if (svg.attrs.x || svg.attrs.y) {\n          transform = transform.then(SvgTransform.fromTranslate(\n            svg.attrs.x ? parseFloat(svg.attrs.x) : 0,\n            svg.attrs.y ? parseFloat(svg.attrs.y) : 0));\n        }\n      }\n\n\n      // Handle the text component and the text spans\n\n      if (svg.type === \"Text\" || svg.type === \"TSpan\"\n        || svg.name === \"tspan\") {\n        if (!svg.childs) return;\n        let a = textAttrs ? Object.assign({}, textAttrs) : {};\n        if (svg.attrs) {\n          for (const k of Object.keys(svg.attrs)) {\n            a[k] = svg.attrs[k];\n          }\n        }\n        svg.childs.map((c: any) => fn(c, transform, a));\n      }\n\n\n      // Handle the actual text\n\n      if (svg.text && textAttrs) {\n\n        // Fix types\n\n        if (textAttrs.textLength) {\n          textAttrs.textLength = parseFloat(textAttrs.textLength);\n        }\n\n\n        // Add\n\n        this.textSpans.push(new SvgTextSpan(svg.text, textAttrs,\n          transform.then(locationTransform)));\n      }\n    };\n\n    fn(svg, null, svg.attrs);\n  }\n\n\n  /**\n   * Finish initialization after the text spans are available\n   */\n  finishInitialization() {\n\n    // Base these on text spans\n\n    const firstSpan = this.textSpans.length > 0 ? this.textSpans[0] : undefined;\n    this.fontSize = firstSpan ? firstSpan.fontSize : DEFAULT_FONT_SIZE;\n    this.color = firstSpan ? firstSpan.color : \"black\";\n\n\n    // If we already know the layouts of all spans, take advantage of it.\n\n    if (this.textSpans.map(t => !!t.layout).reduce((t, c) => t && c, true)) {\n      this.layout = {\n        x: this.location.x,\n        y: this.location.y,\n        width: 0,\n        height: 0,\n      }\n      this.textSpans.forEach(t => {\n        if (!t.layout || !this.layout) return;\n        this.layout.width =\n          Math.max(this.layout.width, t.layout.x + t.layout.width);\n        this.layout.height =\n          Math.max(this.layout.height, t.layout.y + t.layout.height);\n      });\n    }\n    else {\n      this.layout = undefined;\n    }\n  }\n\n\n  /**\n   * Extract the text (e.g. for sorting)\n   *\n   * @param [any] svg the SVG\n   * @return [string] the extracted text\n   */\n  extractText(svg: any): string {\n\n    if (svg.text) return svg.text;\n\n    if (svg.type === \"Text\"\n      || svg.type === \"TSpan\" || svg.name === \"tspan\") {\n      if (svg.childs) {\n        return svg.childs\n          .map((c: any) => this.extractText(c))\n          .reduce((t: string, c: string) => t + c, \"\");\n      }\n    }\n\n    return \"\";\n  }\n\n\n  /**\n   * Clone.\n   *\n   * @return [SvgText] the clone.\n   */\n  clone(): SvgText {\n    let r = Object.create(this);\n    r.location = { x: this.location.x, y: this.location.y };\n    r.textSpans = this.textSpans.slice(0);\n    return r;\n  }\n\n\n  /**\n   * Create a sub-text\n   *\n   * @param [number] from the start character.\n   * @param [number] length the length.\n   * @return [SvgText] the clone.\n   */\n  subText(from: number, length: number = -1): SvgText {\n\n    let r = Object.create(this);\n    r.location = { x: this.location.x, y: this.location.y };\n    r.text = this.text.substr(from, length);\n    r.textSpans = [];\n    r.premeasure = undefined;\n\n    r.equivalents = [];\n    r.index = -1;\n\n    r.subTextParent = this;\n    r.subTextFrom = from;\n    r.subTextTo = length < 0 ? this.text.length : (from + length);\n    r.subTexts = [];\n\n    let pos = 0\n    let firstSpan = -1\n    let shiftLeft = 0\n\n    for (let i = 0; i < this.textSpans.length; i++) {\n      let span = this.textSpans[i];\n      let f = r.subTextFrom - pos;\n      let t = r.subTextTo - pos;\n\n      let currentPos = pos;\n      let currentShiftLeft = shiftLeft;\n\n      pos += span.text.length;\n\n      if (t <= 0) break;\n      if (f >= span.text.length || t <= f) {\n        // If we are skipping a span, then shift everything else left.\n        if (span.textLength) {\n          shiftLeft += span.textLength;\n        }\n        else {\n          if (this.textSpans.length > 1) {\n            console.warn(\"A span in \\\"\" + this.text +\n              \"\\\" does not have textLength\");\n          }\n        }\n        continue;\n      }\n      f = Math.max(f, 0);\n      t = Math.min(t, span.text.length);\n\n      if (firstSpan < 0) firstSpan = i;\n\n      /*if (this.textSpans.length > 0) {\n        console.log([this, this.text, from, length, i,\n          \"f,t\", f, t, span.text.substr(f, t - f)])\n      }*/\n\n      let newSpan = new SvgTextSpan(span.text.substr(f, t - f), span.attrs,\n        span.transform.then(SvgTransform.fromTranslate(-currentShiftLeft, 0)));\n      newSpan.textLength = undefined;\n      newSpan.subTextParentSpan = span;\n\n      span.subTextSpans.push(newSpan);\n      r.textSpans.push(newSpan);\n\n\n      // If the subtext starts with a partial span and has more than one span,\n      // then we need to pre-measure the first partial span and then use its\n      // layout to update the transforms on the subsequent spans.\n\n      if (firstSpan === i && f > 0 && pos < r.subTextTo) {\n        let skip = 0;\n        if (span.textLength) {\n          skip = span.textLength;\n        }\n        else {\n          if (this.textSpans.length > 1) {\n            console.warn(\"A span in \\\"\" + this.text +\n              \"\\\" does not have textLength\");\n          }\n        }\n        r.premeasure = this.subText(currentPos + f, t - f);\n        r.premeasure.onPremeasure = (layout: LayoutRectangle) => {\n          for (let i = 1; i < r.textSpans.length; i++) {\n            // TODO Account for letterSpacing. However, we wouldn't know it\n            // until the parent's layout gets updated through SvgTextComponent's\n            // handleMeasure() method! We may need to fix the transforms and\n            // the measured (!) layout afterwards.\n            r.textSpans[i].setTransform(r.textSpans[i].transform.then(\n              SvgTransform.fromTranslate(-skip + layout.width, 0)));\n          }\n        };\n      }\n    }\n\n    r.finishInitialization();\n\n    this.subTexts.push(r);\n    this.subTexts.sort((a, b) => {\n      let r = a.subTextFrom - b.subTextFrom;\n      if (r !== 0) return r;\n      return a.subTextTo - b.subTextTo;\n    });\n\n    return r;\n  }\n\n\n  /**\n   * Merge with another component.\n   *\n   * @param [SvgText] other the other component.\n   */\n  merge(other: SvgText) {\n\n    // TODO: This requires that \"this\" comes before \"other.\" Fix that.\n\n    let sameLine = Math.abs(this.location.y - other.location.y) <= 2;\n\n    if (!sameLine) this.text += \" \";\n    this.text += other.text;\n\n    var locationTransformForThis: SvgTransform;\n    if (other.location.x >= this.location.x) {\n      locationTransformForThis = new SvgTransform();\n    }\n    else {\n      locationTransformForThis = SvgTransform.fromTranslate(\n        this.location.x - other.location.x,\n        0\n      );\n      this.textSpans.forEach(t => {\n        t.transform = t.transform.then(locationTransformForThis);\n        t.origin = locationTransformForThis.apply(t.origin);\n        if (t.layout) {\n          t.layout.x = t.location.x;\n          t.layout.y = t.location.y;\n        }\n      });\n      this.location.x = other.location.x;\n    }\n\n    let locationTransformForOther = SvgTransform.fromTranslate(\n      other.location.x - this.location.x,\n      other.location.y - this.location.y\n    );\n\n    other.textSpans.forEach(t => {\n      var x = t.clone();\n      x.transform = x.transform.then(locationTransformForOther);\n      x.origin = locationTransformForOther.apply(x.origin);\n      if (x.layout) {\n        x.layout.x = x.location.x;\n        x.layout.y = x.location.y;\n      }\n      this.textSpans.push(x);\n    });\n\n    if (!!this.layout && !!other.layout) {\n      var thisX1 = this.layout.x;\n      var thisY1 = this.layout.y;\n      var thisX2 = this.layout.x + this.layout.width;\n      var thisY2 = this.layout.y + this.layout.height;\n      var otherX1 = other.layout.x;\n      var otherY1 = other.layout.y;\n      var otherX2 = other.layout.x + other.layout.width;\n      var otherY2 = other.layout.y + other.layout.height;\n\n      this.layout.x = Math.min(thisX1, otherX1);\n      this.layout.y = Math.min(thisY1, otherY1);\n      this.layout.width = Math.max(otherX2, thisX2) - Math.min(thisX1, otherX1);\n      this.layout.height = Math.max(otherY2, thisY2) - Math.min(thisY1, otherY1);\n    }\n  }\n\n\n  /**\n   * Render using React Native (not SVG).\n   *\n   * @param [any] key the key.\n   * @param [number] scale the scale.\n   * @return [React.Component] the rendered component.\n   */\n  renderNative(key?: any, scale: number = 1) {\n    return (\n      <View\n        key={key}\n        style={{\n          position: \"relative\"\n        }}>\n        {this.textSpans.map((s, i) => s.renderNative(i, scale))}\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  LayoutChangeEvent,\n  LayoutRectangle,\n  View,\n} from 'react-native';\n\ntype MeasureComponentsProps = {\n  onMeasure?: (layouts: LayoutRectangle[]) => void;\n}\n\ntype MeasureComponentsState = {\n}\n\nexport default class MeasureComponents\nextends React.Component<MeasureComponentsProps, MeasureComponentsState> {\n\n  layouts: LayoutRectangle[];\n  count: number;\n  remaining: number;\n\n  constructor(props: MeasureComponentsProps) {\n    super(props);\n    this.state = {};\n    this.count = this.props.children\n      ? React.Children.count(this.props.children) : 0;\n    this.remaining = this.count;\n    this.layouts = new Array<LayoutRectangle>(this.count);\n  }\n\n\n  handleOnLayout(index: number, event: LayoutChangeEvent) {\n    let d: LayoutRectangle = {\n      x: 0,\n      y: 0,\n      width: event.nativeEvent.layout.width,\n      height: event.nativeEvent.layout.height,\n    }\n    this.layouts[index] = d;\n    this.remaining--;\n\n    if (this.remaining <= 0) {\n      let done = true;\n      for (let i = 0; i < this.layouts.length; i++) {\n        if (!this.layouts[i]) {\n          done = false;\n          break;\n        }\n      }\n      if (done && this.props.onMeasure) {\n        /*let x = {};\n        React.Children.map(this.props.children, (child, i) => {\n          x[child.props[\"key\"]] = this.layouts[i];\n        });*/\n        this.props.onMeasure(this.layouts);\n      }\n    }\n  }\n\n\n  render() {\n    return (\n      <View style={{\n        width: 2000,\n        height: 0,\n        flex: 1,\n        flexDirection: 'column',\n        justifyContent: 'flex-start',\n        alignItems: 'flex-start',\n        overflow: 'hidden',\n        position: 'absolute',\n        left: 0,\n        top: 0,\n      }}>\n        {React.Children.map(this.props.children,\n          (child, i) => {\n            return (\n              <View\n                key={i}\n                onLayout={l => this.handleOnLayout(i, l)}\n                style={{\n                  position: 'absolute',\n                  left: 0,\n                  top: 0,\n                  flex: 1,\n                  alignItems: 'center',\n                }}\n                >{child}</View>\n            )\n        })}\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  LayoutRectangle,\n  View,\n} from \"react-native\";\n\nimport MeasureComponents from './MeasureComponents';\nimport SvgText from './SvgText';\n\n\n/**\n * Point coordinates.\n */\ntype XY = {\n  x: number;\n  y: number;\n}\n\n\ntype SvgTextComponentProps = {\n  text: SvgText;\n  asHint?: boolean;\n  scale?: number;\n  onMeasure?: (layout: LayoutRectangle) => void;\n}\n\n\ntype SvgTextComponentState = {\n  spanLayouts?: LayoutRectangle[];\n  overallLayout?: LayoutRectangle;\n}\n\n\n/**\n * A component for rendering a collection of SVG text spans.\n */\nexport default class SvgTextComponent\nextends React.Component<SvgTextComponentProps, SvgTextComponentState> {\n\n  /**\n   * The constructor.\n   *\n   * @param [SvgTextComponentProps] props the properties.\n   */\n  constructor(props: SvgTextComponentProps) {\n    super(props);\n\n    let spanLayouts: (LayoutRectangle | undefined)[] | undefined\n      = this.props.text.textSpans.map(t => t.layout);\n    if (!spanLayouts.map(l => !!l).reduce((t, c) => t && c, true)) {\n      spanLayouts = undefined;\n    }\n\n    this.state = {\n      spanLayouts: spanLayouts as LayoutRectangle[] | undefined,\n      overallLayout: this.props.text.layout,\n    };\n\n    if (this.state.spanLayouts && this.state.overallLayout\n      && this.props.onMeasure) {\n      this.props.onMeasure(this.state.overallLayout);\n    }\n  }\n\n\n  /**\n   * Handle the measurement.\n   *\n   * @param [LayoutRectangle[]] layouts the layouts with dimensions filled in.\n   */\n  handleMeasure(layouts: LayoutRectangle[]) {\n    var overall: LayoutRectangle = {\n      x: this.props.text.location.x,\n      y: this.props.text.location.y,\n      width: 0,\n      height: 0\n    };\n    for (let i = 0; i < layouts.length; i++) {\n      let span = this.props.text.textSpans[i];\n      let p = span.location;\n      // Keep the text length if we already have it\n      let width = span.textLength ? span.textLength : layouts[i].width;\n      let height = layouts[i].height;\n      overall.width = Math.max(overall.width, width + p.x);\n      overall.height = Math.max(overall.height, layouts[i].height + p.y);\n      span.measuredWidth = layouts[i].width;\n      span.layout = {\n        x: p.x,\n        y: p.y,\n        width: width,\n        height: height,\n      }\n      if (span.measuredWidth && span.textLength && span.text.length > 1) {\n        span.computedLetterSpacing = (span.textLength - span.measuredWidth)\n          / (span.text.length - 1);\n        for (let j = 0; j < span.subTextSpans.length; j++) {\n          span.subTextSpans[j].letterSpacing = span.effectiveLetterSpacing();\n        }\n      }\n    }\n    this.props.text.layout = overall;\n    this.setState({\n      spanLayouts: layouts,\n      overallLayout: overall,\n    });\n    if (this.props.onMeasure) {\n      this.props.onMeasure(overall);\n    }\n  }\n\n\n  /**\n   * Render the component.\n   */\n  render() {\n    const scale = this.props.scale === undefined ? 1 : this.props.scale;\n    return (\n      <View\n        style={[\n          {\n            position: \"relative\",\n            width: this.state.overallLayout\n              ? this.state.overallLayout.width * scale + 1 : undefined,\n            height: this.state.overallLayout\n              ? this.state.overallLayout.height * scale : undefined,\n          }\n        ]}>\n        {this.state.overallLayout\n          && (this.props.text.textSpans.map((s, i) =>\n            s.renderNative(i, scale, false, this.props.asHint)))}\n        {!this.state.spanLayouts && !this.state.overallLayout &&\n          <MeasureComponents key={-1} onMeasure={l => this.handleMeasure(l)}>\n            {this.props.text.textSpans.map((s, i) => s.renderNative(i, 1, true))}\n          </MeasureComponents>}\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  Animated,\n  Dimensions,\n  LayoutChangeEvent,\n  LayoutRectangle,\n  NativeSyntheticEvent,\n  NativeScrollEvent,\n  View,\n} from \"react-native\";\n\nimport Svg from 'react-native-svg';\nimport * as SvgComponent from 'react-native-svg';\n\nimport Draggable from './Draggable';\nimport SvgText from './SvgText';\nimport SvgTextComponent from './SvgTextComponent';\nimport SvgTransform from './SvgTransform';\n\n// TODO Use this instead when not running in Expo\n// import TextSize from 'react-native-text-size';\n\n\n/**\n * The diagram data (SVGs converted to a single JSON).\n */\nconst DATA = require(\"./assets/diagrams.json\");\n\n/**\n * The SVG text shift\n */\nconst SVG_TEXT_VERTICAL_SHIFT = 3;\nconst SVG_TEXT_HORIZONTAL_SHIFT = -1;\n\n/**\n * Whether to always use native rendering for text\n */\nconst ALWAYS_RENDER_TEXT_NATIVE = true;\n\n\n/**\n * Point coordinates.\n */\ntype XY = {\n  x: number;\n  y: number;\n}\n\n\n/**\n * Border and margin size.\n */\ntype BorderSize = {\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n}\n\n\n/**\n * The layout mechanism for test components\n */\nexport abstract class BmcTestLayout {\n\n  basePosition: XY;\n  borderSize: BorderSize;\n  extraHeight: number;\n  extraWidth: number;\n  marginSize: BorderSize;\n  scale: boolean;\n  supportsScroll: boolean;\n\n  /**\n   * The constructor\n   */\n  constructor() {\n    this.basePosition = { x: 0, y: 0 };\n    this.borderSize = { left: 0, top: 0, right: 0, bottom: 0 };\n    this.extraWidth = 0;\n    this.extraHeight = 0;\n    this.marginSize = { left: 0, top: 0, right: 0, bottom: 0 };\n    this.scale = true;\n    this.supportsScroll = false;\n  }\n\n  /**\n   * Compute the layout of the test components\n   */\n  abstract doLayout(texts: SvgText[], svgViewBox: LayoutRectangle): void;\n\n  /**\n   * Handle a test component being removed from the test repository\n   */\n  handleComponentRemoved(texts: SvgText[], index: number,\n    alreadyRemoved: boolean[], callback?: () => void): void {\n    if (callback) {\n      callback();\n    }\n  };\n}\n\n\n/**\n * Test layouts: Basic mouse interface (without scrolling)\n */\nexport class BmcTestLayoutMouseBasic extends BmcTestLayout {\n\n  /**\n   * The constructor\n   */\n  constructor() {\n    super();\n    this.supportsScroll = false;\n  }\n\n  /**\n   * Compute the layout of the test components\n   */\n  doLayout(texts: SvgText[], svgViewBox: LayoutRectangle) {\n\n    let svgViewBoxY2 = svgViewBox.y + svgViewBox.height;\n    let tx = svgViewBox.x + svgViewBox.width;\n    let ty = svgViewBox.y;\n    let widest = 0;\n    let paddingX = 15;\n    let paddingY = 5;\n\n    texts.forEach(t => {\n      if (t.layout === undefined) return;\n\n      t.testLocation = { x: tx, y: ty };\n      ty += t.layout.height + paddingY;\n      if (t.layout.width > widest) widest = t.layout.width;\n      if (svgViewBox &&\n        ty + t.layout.height > svgViewBoxY2) {\n        ty = svgViewBox.y;\n        tx += paddingX + widest;\n        widest = 0;\n      }\n    });\n\n    this.extraWidth = tx + widest + paddingY - svgViewBox.x - svgViewBox.width;\n  }\n}\n\n\n/**\n * Test layouts: Basic touch interface with scrolling\n */\nexport class BmcTestLayoutTouchScroll extends BmcTestLayout {\n\n  /**\n   * The constructor\n   */\n  constructor() {\n    super();\n    this.borderSize = { left: 7, top: 2, right: 5, bottom: 8 };\n    this.marginSize = { left: 0, top: 0, right: 10, bottom: 0 };\n    this.scale = false;\n    this.supportsScroll = true;\n  }\n\n  /**\n   * Compute the layout of the test components\n   */\n  doLayout(texts: SvgText[], svgViewBox: LayoutRectangle) {\n\n    let tx = this.borderSize.left;\n    let ty = this.borderSize.top + 3;\n    let widest = 0;\n    let paddingX = 20;\n    let paddingY = 5;\n\n    texts.forEach(t => {\n      if (t.layout === undefined) return;\n\n      t.testLocation = { x: tx, y: ty };\n      ty += t.layout.height + paddingY + this.borderSize.top\n        + this.borderSize.bottom;\n      if (t.layout.width > widest) widest = t.layout.width;\n    });\n\n    this.basePosition = { x: svgViewBox.x + svgViewBox.width, y: svgViewBox.y };\n    this.extraWidth = tx + widest + paddingX + this.borderSize.bottom;\n  }\n\n  /**\n   * Handle a test component being removed from the test repository\n   */\n  handleComponentRemoved(texts: SvgText[], index: number,\n    alreadyRemoved: boolean[], callback?: () => void): void {\n    if (index + 1 >= texts.length) {\n      if (callback) {\n        callback();\n      }\n      return;\n    }\n\n    let nextIndex = index + 1;\n    while (nextIndex < texts.length) {\n      let text = texts[nextIndex];\n      if (text.draggable && text.testLocation && !alreadyRemoved[nextIndex]) {\n        break;\n      }\n      nextIndex++;\n    }\n    if (nextIndex >= texts.length) {\n      if (callback) {\n        callback();\n      }\n      return;\n    }\n\n    let textCurrent = texts[index];\n    let textNext = texts[nextIndex];\n    if (!textCurrent.testLocation || !textNext.testLocation) {\n      if (callback) {\n        callback();\n      }\n      return;\n    }\n\n    let dy = textCurrent.testLocation.y - textNext.testLocation.y;\n    let last: SvgText | null = null;\n    for (let i = index + 1; i < texts.length; i++) {\n      let text = texts[i];\n      if (text.draggable && text.testLocation && !alreadyRemoved[i]) {\n        last = text;\n      }\n    }\n    if (last === null) {\n      if (callback) {\n        callback();\n      }\n      return;\n    }\n\n    for (let i = index + 1; i < texts.length; i++) {\n      let text = texts[i];\n      if (text.draggable && text.testLocation && !alreadyRemoved[i]) {\n        if (text !== last) {\n          text.draggable.spring({\n            toValue: {\n              x: 0,\n              y: dy,\n            },\n            speed: 100,\n          });\n        }\n        else {\n          text.draggable.spring({\n            toValue: {\n              x: 0,\n              y: dy,\n            },\n            speed: 100,\n          },\n          () => {\n            for (let j = index + 1; j < texts.length; j++) {\n              let tj = texts[j];\n              if (tj.draggable && tj.testLocation) {\n                tj.testLocation.y += dy;\n                tj.draggable.resetPan();\n              }\n            }\n            if (callback) {\n              callback();\n            }\n          });\n        }\n      }\n    }\n  }\n}\n\n\nconst BMC_DIAGRAM_TEXT_EXCEPTIONS: { [key: string]: string[] } = {\n  \"Matthew\": [\n    \"Beatitudes\",\n  ],\n  \"Acts\": [\n    \"1st Missionary Journey\",\n    \"2nd Missionary Journey\",\n    \"3rd Missionary Journey\",\n    \"4th Missionary Journey\",\n  ],\n  \"Romans\": [\n    \"The Heart of Jesus Christ\",\n  ]\n}\n\n\ntype BmcDiagramProps = {\n  book: string;\n  testMode?: boolean;\n  testHints?: boolean;\n}\n\n\ntype BmcDiagramState = {\n  containerLayout?: LayoutRectangle;\n  correctTextLocation: boolean[];\n  hasTestLayouts?: boolean;\n  finishedPremeasure?: boolean;\n  extraWidth: number;\n  testScrollEnabled?: boolean;\n}\n\n\n/**\n * The BMC diagram + a version for testing.\n *\n * This diagram is based on an SVG converted to the JSON format.\n */\nexport default class BmcDiagram\nextends React.Component<BmcDiagramProps, BmcDiagramState> {\n\n  svg: any;\n  svgView: View | null;\n  svgViewBox: LayoutRectangle;\n  texts: SvgText[];\n  exemptedTexts: SvgText[];\n  premeasureTexts?: SvgText[];\n\n  testLayout: BmcTestLayout;\n  testLayoutSupportsScroll: boolean;\n  testScrollEnabled: Animated.Value;\n\n  scrollOffset: XY;\n  diagramScale: Animated.Value;\n  diagramScaleLast: number;\n  testScale: Animated.Value;\n  testScaleLast: number;\n  diagramTranslate: Animated.ValueXY;\n  diagramMaxHeight: Animated.Value;\n\n  lastLayoutChangeEvent?: LayoutChangeEvent;\n  lastExtraWidth?: number;\n\n\n  /**\n   * Create an instance of class BmcDiagram.\n   *\n   * @oaram [BmcDiagramProps] props the properties\n   */\n  constructor(props: BmcDiagramProps) {\n    super(props);\n    this.svgView = null;\n\n\n    // Fetch and validate the SVG\n\n    this.svg = DATA[this.props.book.replace(/ /g, \"_\")];\n    if (!this.svg || this.svg.type !== \"Svg\") this.svg = null;\n\n\n    // Fetch and parse the view box\n\n    this.svgViewBox = { x: 0, y: 0, width: 100, height: 100 };\n    if (this.svg && this.svg.attrs && this.svg.attrs.viewBox) {\n      const v = this.svg.attrs.viewBox.split(/[, ]+/)\n        .map((v: any) => parseFloat(v));\n      if (v.length === 4) {\n        this.svgViewBox = {\n          x: v[0],\n          y: v[1],\n          width: v[2],\n          height: v[3],\n        };\n      }\n    }\n\n\n    // Extract the labels, and split them between exempted and draggable.\n\n    let allTexts = !(this.svg && this.svg.childs) ? new Array<SvgText>(0) :\n      (this.svg.childs.map((c: any) => this.extractSvgText(c))).flat();\n\n    this.texts = [];\n    this.exemptedTexts = [];\n    for (let i = 0; i < allTexts.length; i++) {\n      if (allTexts[i].fontSize < 3) {\n        continue;\n      }\n      if (!this.isExempted(allTexts[i].text)) {\n        this.texts.push(allTexts[i]);\n      }\n      else {\n        this.exemptedTexts.push(allTexts[i]);\n      }\n    }\n\n    this.prepareTestComponentsBeforeMeasure();\n\n    let correctTextLocation = new Array<boolean>(this.texts.length);\n    for (let i = 0; i < correctTextLocation.length; i++) {\n      correctTextLocation[i] = !this.props.testMode;\n    }\n\n\n    // Set the initial state\n\n    this.state = {\n      correctTextLocation: correctTextLocation,\n      extraWidth: 0,\n    };\n\n    this.testLayoutSupportsScroll = true;\n    this.testScrollEnabled = new Animated.Value(1);\n    this.scrollOffset = { x: 0, y: 0 };\n\n    this.diagramScale = new Animated.Value(1);\n    this.diagramScaleLast = 1.0;\n    this.testScale = new Animated.Value(1);\n    this.testScaleLast = 1.0;\n    this.diagramTranslate = new Animated.ValueXY();\n    this.diagramMaxHeight = new Animated.Value(1000);\n\n    this.testLayout = new BmcTestLayoutTouchScroll();\n  }\n\n\n  /**\n   * Prepare the test components - before we measure them\n   */\n  prepareTestComponentsBeforeMeasure() {\n    if (!this.props.testMode || !this.svgViewBox) return;\n\n\n    // Split chapter number sequences into individual chapters.\n\n    let subTexts: SvgText[] = [];\n    for (let i = 0; i < this.texts.length; i++) {\n      let a = this.texts[i];\n      if (a.color === \"red\"\n        || a.color.match(/^rgb\\(2..,.*/)  // red\n        || a.color.match(/^#[c-fC-F].*/)  // red\n        || a.color === \"#0f4c28\" /* cyan */\n        || a.color === \"#005c5d\" /* cyan */) {\n\n        // Must contain more than one thing, or if it is just one thing, we\n        // need to fix it using a sub-text.\n        if (!(a.text.includes(\" \") || a.text.includes(\",\"))) continue;\n\n        // Split the text\n        let splitWithDelimiters = a.text.split(/([, ]+)/);\n        let parts: string[] = [];\n        for (let j = 0; j < splitWithDelimiters.length; j++) {\n          if (splitWithDelimiters[j] === \"\") continue;\n          if (parts.length === 0) {\n            parts.push(splitWithDelimiters[j]);\n          }\n          else {\n            if (splitWithDelimiters[j].startsWith(\" \")\n             || splitWithDelimiters[j].startsWith(\",\")) {\n              parts[parts.length - 1] += splitWithDelimiters[j];\n            }\n            else {\n              parts.push(splitWithDelimiters[j]);\n            }\n          }\n        }\n\n        if (parts.length <= 0) continue;\n        let lastPart = parts[parts.length - 1];\n        if (!(lastPart.endsWith(\",\") || parts.length > 1)) continue;\n\n        // Create sub-texts\n        let start = 0;\n        for (let j = 0; j < parts.length; j++) {\n          let n = a.subText(start, parts[j].length);\n          subTexts.push(n);\n          let t = n.text.replace(/[, ]+$/, '');\n          if (t !== n.text) {\n            let testAlternative = a.subText(start, t.length);\n            testAlternative.diagramAlternative = n;\n            n.testAlternative = testAlternative;\n            subTexts.push(testAlternative);\n          }\n          start += parts[j].length;\n        }\n      }\n    }\n\n    this.premeasureTexts =\n      subTexts.map(t => t.premeasure).filter(t => !!t) as SvgText[];\n\n    this.texts.push(...subTexts);\n  }\n\n\n  /**\n   * Prepare the test components - after we measure them\n   */\n  prepareTestComponentsAfterMeasure() {\n    if (!this.props.testMode || !this.svgViewBox) return;\n\n    let i, j;\n    let deleted = Array(this.texts.length).fill(false);\n\n\n    // Finish sub-texts\n\n    for (i = 0; i < this.texts.length; i++) {\n      let a = this.texts[i];\n      if (a.subTexts.length <= 0) continue;\n\n      deleted[i] = true;\n\n\n      // The following assumes that we properly measured everything\n\n      let dx = new Map<number, number>();\n      dx.set(0, 0);\n      for (j = 0; j < a.subTexts.length; j++) {\n        let t = a.subTexts[j];\n        if (!t.layout) continue;\n\n        let startX = dx.get(t.subTextFrom);\n        if (startX !== undefined) {\n          let w = t.layout.width;\n          if (t.textSpans.length > 0) {\n            // TODO Properly account for letter spacing (e.g. for 2 Chronicles);\n            // this is a horrible hack that works well only if there is a single\n            // text span. Even if the letter spacing is uniform throughout the\n            // text, the measured layout is a result of a combination of span\n            // layouts that did not take letter spacing into account and those\n            // that did by the virtue of how they are positioned using their\n            // original textLength's.\n            w += t.textSpans[0].effectiveLetterSpacing() * t.text.length\n          }\n          dx.set(t.subTextTo, startX + w);\n          t.location.x += startX;\n        }\n      }\n    }\n\n\n    // Remove components with test alternatives\n\n    for (i = 0; i < this.texts.length; i++) {\n      let a = this.texts[i];\n      if (!a.testAlternative) continue;\n\n      deleted[i] = true;\n    }\n\n\n    // Remove duplicate elements and other elements worth removing\n\n    let done = false;\n    while (!done) {\n      done = true;\n\n      for (i = 0; i < this.texts.length; i++) {\n        if (deleted[i]) continue;\n        let a = this.texts[i];\n\n\n        // Too small\n\n        if (a.fontSize < 3) {\n          deleted[i] = true;\n          continue;\n        }\n\n\n        // Check for duplicates\n\n        for (j = 0; j < this.texts.length; j++) {\n          if (i === j) continue;\n          if (deleted[j]) continue;\n\n          let b = this.texts[j];\n\n          if (!a.layout || !b.layout) continue;\n          if (a.fontSize !== b.fontSize) continue;\n          if (a.color !== b.color) continue;\n\n\n          // The same\n\n          if (a.text === b.text && Math.abs(a.layout.x - b.layout.x) < 1 &&\n            Math.abs(a.layout.y - b.layout.y) < 1) {\n            deleted[j] = true;\n            done = false;\n            continue;\n          }\n        }\n      }\n    }\n\n\n    // Merge relevant components\n\n    done = false;\n    while (!done) {\n      done = true;\n\n      for (i = 0; i < this.texts.length; i++) {\n        if (deleted[i]) continue;\n        for (j = 0; j < this.texts.length; j++) {\n          if (i === j) continue;\n          if (deleted[j]) continue;\n\n          let a = this.texts[i];\n          let b = this.texts[j];\n\n          if (!a.layout || !b.layout) continue;\n          if (a.fontSize !== b.fontSize) continue;\n          if (a.color !== b.color) continue;\n\n\n          // On the same line\n\n          if (Math.abs(a.layout.y - b.layout.y) < 1 && a.layout.x < b.layout.x){\n            if (Math.abs(a.layout.x + a.layout.width - b.layout.x) <= 2) {\n\n              // Hack: Do not merge chapter numbers\n              if (a.color === \"red\"\n                || a.color.match(/^rgb\\(2..,.*/)  // red\n                || a.color.match(/^#[c-fC-F].*/)  // red\n                || a.color === \"#005c5d\" /* cyan */) {\n                console.warn(\"Not merging: \\\"\" + a.text\n                  + \"\\\" and \\\"\" + b.text + \"\\\"\");\n                continue;\n              }\n\n              a.merge(b);\n              deleted[j] = true;\n              done = false;\n              continue;\n            }\n          }\n\n\n          // On top of each other\n\n          if (Math.abs(a.layout.y + a.layout.height - b.layout.y) <= 4\n            || (a.layout.y < b.layout.y\n              && a.layout.y + a.layout.height > b.layout.y)) {\n\n            // Hack: Do not merge chapter numbers\n            if (a.color === \"red\"\n              || a.color.match(/^rgb\\(2..,.*/)  // red\n              || a.color.match(/^#[c-fC-F].*/)  // red\n              || a.color === \"#005c5d\" /* cyan */) {\n              continue;\n            }\n\n            // Left-justified\n            if (Math.abs(a.layout.x - b.layout.x) <= 2) {\n              a.merge(b);\n              deleted[j] = true;\n              done = false;\n              continue;\n            }\n\n            // Center-justified (10% error margin)\n            if (Math.abs(a.layout.x + a.layout.width / 2\n                - b.layout.x - b.layout.width / 2)\n                <= 0.10 * Math.max(a.layout.width, b.layout.width)) {\n              a.merge(b);\n              deleted[j] = true;\n              done = false;\n              continue;\n            }\n\n            // Right-justified\n            if (Math.abs(a.layout.x + a.layout.width\n                - b.layout.x - b.layout.width) <= 2) {\n              a.merge(b);\n              deleted[j] = true;\n              done = false;\n              continue;\n            }\n          }\n        }\n      }\n    }\n\n    this.texts = this.texts.filter((v, i) => !deleted[i]);\n\n\n    // Sort the components\n\n    const collator = new Intl.Collator(undefined, {\n      numeric: true,\n      sensitivity: 'base'\n    });\n    this.texts.sort((a, b) => {\n      //if (a.fontSize !== b.fontSize) return a.fontSize > b.fontSize ? -1 : 1;\n      if (a.color !== b.color) return a.color < b.color ? -1 : 1;\n      return collator.compare(a.text, b.text);\n    });\n\n\n    // Determine which components are equivalent\n\n    for (i = 0; i < this.texts.length; i++) {\n      for (j = i + 1; j < this.texts.length; j++) {\n        let a = this.texts[i];\n        let b = this.texts[j];\n\n        if (a.text !== b.text) continue;\n        if (a.fontSize !== b.fontSize) continue;\n        if (a.color !== b.color) continue;\n\n        a.equivalents.push(b);\n        b.equivalents.push(a);\n      }\n    }\n\n\n    // Assign indexes\n\n    for (i = 0; i < this.texts.length; i++) {\n      this.texts[i].index = i;\n    }\n  }\n\n\n  /**\n   * Compute the test layouts\n   */\n  doTestLayout() {\n    this.testLayout.doLayout(this.texts, this.svgViewBox);\n\n    this.testLayoutSupportsScroll = this.testLayout.supportsScroll;\n    this.testScrollEnabled.setValue(this.testLayout.supportsScroll ? 1 : 0);\n\n    this.setState({\n      hasTestLayouts: true,\n      extraWidth: this.testLayout.extraWidth,\n    });\n  }\n\n\n  /**\n   * Receive the measurement of a text component\n   *\n   * @param [SvgText] text the corresponding text source.\n   * @param [LayoutRectangle] layout the layout with dimensions filled in.\n   */\n  handleSvgTextComponentLayout(text: SvgText, layout: LayoutRectangle) {\n    if (this.props.testMode && this.svgViewBox) {\n      /*let count = this.texts.map(t => !!t.layout)\n        .reduce((t, c) => c ? t + 1 : t, 0);\n      if (count === 56) {\n        console.log(this.texts.map(t => !!t.layout));\n        console.log(this.texts[53]);\n      }*/\n      if (this.texts.map(t => !!t.layout).reduce((c, t) => t && c, true)) {\n\n        // All layouts are now filled in\n        this.prepareTestComponentsAfterMeasure();\n        this.doTestLayout();\n      }\n    }\n  }\n\n\n  /**\n   * Is the given text exempted from the special handling?\n   *\n   * @param [string] text\n   * @return [boolean] true if it is exempted\n   */\n  isExempted(text: string): boolean {\n    // Do we need to do the following? .replace(/ /g, \"\")\n    let e: string[] | undefined = BMC_DIAGRAM_TEXT_EXCEPTIONS[this.props.book];\n    if (e === undefined) return false;\n    return e.indexOf(text) >= 0;\n  }\n\n\n  /**\n   * Extract text.\n   *\n   * @param [any] svg the SVG JSON to render\n   */\n  extractSvgText(svg: any): SvgText[] {\n\n    let r = new Array<SvgText>();\n\n    const fn = (\n      svg: any,\n      transformSoFar: SvgTransform | null,\n    ) => {\n\n      // Determine the new transform\n\n      let transform = transformSoFar || new SvgTransform();\n      if (svg.attrs) {\n        if (svg.attrs.transform) {\n          transform = transform.then(SvgTransform.parse(svg.attrs.transform));\n        }\n        if (svg.attrs.x || svg.attrs.y) {\n          transform = transform.then(SvgTransform.fromTranslate(\n            svg.attrs.x ? parseFloat(svg.attrs.x) : 0,\n            svg.attrs.y ? parseFloat(svg.attrs.y) : 0));\n        }\n      }\n\n\n      // Recurse into containers\n\n      if (svg.type === \"G\") {\n        if (svg.childs) {\n          svg.childs.map((c: any) => fn(c, transform));\n        }\n      }\n\n\n      // Handle the text component\n\n      if (svg.type === \"Text\") {\n        r.push(new SvgText(svg, transform));\n      }\n    };\n\n    fn(svg, null);\n    return r;\n  }\n\n\n  /**\n   * Render a SVG component.\n   *\n   * @param [any] svg the SVG JSON to render\n   */\n  renderSvg(svg: any, key?: any) {\n\n    if (svg.text) return svg.text;\n\n\n    // Fix up attributes\n\n    let attrs = svg.attrs;\n    if (attrs === null || attrs === undefined) attrs = {};\n    if (attrs.fontSize) {\n      attrs = Object.assign({}, attrs);\n      attrs.fontSize += \"px\";\n    }\n\n\n    // Render and recurse\n\n    if (svg.type === \"G\") {\n      return (\n        <SvgComponent.G key={key} {...attrs}>\n          {svg.childs\n            && svg.childs.map((c: any, i: any) => this.renderSvg(c, i))}\n        </SvgComponent.G>\n      );\n    }\n\n    if (svg.type === \"Path\") {\n      if (attrs.d) {\n        // TODO Split at Z instead to fix iOS rendering problems?\n        attrs = Object.assign({}, attrs);\n        attrs.d = attrs.d.replace(\"z\", \" Z \");\n      }\n      return (\n        <SvgComponent.Path key={key} {...attrs}>\n          {svg.childs\n            && svg.childs.map((c: any, i: any) => this.renderSvg(c, i))}\n        </SvgComponent.Path>\n      );\n    }\n\n    if (!this.props.testMode && !ALWAYS_RENDER_TEXT_NATIVE) {\n      if (svg.type === \"Text\") {\n        return (\n          <SvgComponent.Text key={key} {...attrs}>\n            {svg.childs\n              && svg.childs.map((c: any, i: any) => this.renderSvg(c, i))}\n          </SvgComponent.Text>\n        );\n      }\n\n      if (svg.type === \"TSpan\" || svg.name === \"tspan\") {\n        attrs = Object.assign({}, attrs);\n        if (attrs.x !== undefined) {\n          attrs.x = parseFloat(attrs.x) + SVG_TEXT_HORIZONTAL_SHIFT;\n        }\n        else {\n          attrs.x = SVG_TEXT_VERTICAL_SHIFT;\n        }\n        if (attrs.y !== undefined) {\n          attrs.y = parseFloat(attrs.y) + SVG_TEXT_VERTICAL_SHIFT;\n        }\n        else {\n          attrs.y = SVG_TEXT_VERTICAL_SHIFT;\n        }\n        return (\n          <SvgComponent.TSpan key={key} {...attrs}>\n            {svg.childs\n              && svg.childs.map((c: any, i: any) => this.renderSvg(c, i))}\n          </SvgComponent.TSpan>\n        );\n      }\n    }\n\n    return null;\n  }\n\n\n  /**\n   * Handle the layout event.\n   *\n   * @param [LayoutChangeEvent] e the event.\n   */\n  handleLayoutChangeEvent(e: LayoutChangeEvent) {\n    this.lastLayoutChangeEvent = e;\n    if (!this.svgViewBox) return;\n\n    this.lastExtraWidth = this.state.extraWidth;\n\n    let extraWidth = this.state.extraWidth ? this.state.extraWidth : 0;\n    let scale = 1;\n    if (this.testLayout.scale) {\n      let totalWidth = this.svgViewBox.width + extraWidth;\n      scale = e.nativeEvent.layout.width / totalWidth;\n    }\n    else {\n      let remainingWidth = e.nativeEvent.layout.width - extraWidth;\n      if (remainingWidth < 50) remainingWidth = 50;\n      scale = remainingWidth / this.svgViewBox.width;\n    }\n    if (scale > 1) scale = 1;\n\n    let scaledSvgWidth = scale * this.svgViewBox.width;\n    let scaledSvgHeight = 1.0 * scaledSvgWidth\n      * this.svgViewBox.height / this.svgViewBox.width;\n\n    if (scaledSvgHeight > e.nativeEvent.layout.height\n     && e.nativeEvent.layout.height > 0) {\n      scale *= e.nativeEvent.layout.height / scaledSvgHeight;\n      scaledSvgHeight = e.nativeEvent.layout.height;\n      scaledSvgWidth = scale * this.svgViewBox.width;\n    }\n\n    let tx = -this.svgViewBox.width  * (1 - scale) / 2;\n    let ty = -this.svgViewBox.height * (1 - scale) / 2;\n\n    let maxHeight = 0;  // Used only in dislay (not test) mode\n    if (!this.props.testMode) {\n      let totalWidth = this.svgViewBox.width + extraWidth;\n      let totalHeight = this.svgViewBox.height;\n      maxHeight = e.nativeEvent.layout.width * totalHeight / totalWidth;\n    }\n\n    this.diagramScale.setValue(scale);\n    this.diagramScaleLast = scale;\n    if (this.testLayout.scale) {\n      this.testScale.setValue(scale);\n      this.testScaleLast = scale;\n    }\n    this.diagramTranslate.setValue({ x: tx, y: ty });\n    this.diagramMaxHeight.setValue(maxHeight);\n  }\n\n\n  /**\n   * Handler for document update.\n   */\n  componentDidUpdate() {\n\n    // Sometimes we miss layout update due to the layout change event not being\n    // nicely correlated with the extraWidth state change, so fix it up.\n\n    if (this.lastExtraWidth !== this.state.extraWidth) {\n      if (this.lastLayoutChangeEvent !== undefined) {\n        this.handleLayoutChangeEvent(this.lastLayoutChangeEvent);\n      }\n    }\n  }\n\n\n  /**\n   * Render the component.\n   */\n  render() {\n\n    const windowDimensions = Dimensions.get('window');\n    if (windowDimensions.width <= 0) return;\n    if (!this.svg || !this.svgViewBox) return;\n\n\n    // Render\n\n    return (\n      <Animated.View\n        onLayout={(e: LayoutChangeEvent) => this.handleLayoutChangeEvent(e)}\n        style={[\n          {\n            //backgroundColor: \"#F0F08080\",\n            flexGrow: 1,\n            flexShrink: 1,\n          }, this.props.testMode ? [] : {\n            maxHeight: this.diagramMaxHeight,\n          }\n        ]}>\n\n        {/* The base diagram */}\n        <Animated.View\n          width={this.svgViewBox.width /* because the translate are relative to this */}\n          height={this.svgViewBox.height}\n          style={{\n            //backgroundColor: \"#80F0F080\",\n            position: this.props.testMode && \"absolute\",\n            top: 0,\n            left: 0,\n            flexGrow: 0,\n            flexShrink: 0,\n            transform: [{\n              translateX: this.diagramTranslate.x,\n            }, {\n              translateY: this.diagramTranslate.y,\n            }, {\n              scale: this.diagramScale,\n            }],\n          }}>\n\n          {/* The SVG */}\n          <View ref={r => { this.svgView = r; }}>\n            <Svg\n              width={this.svgViewBox.width}\n              height={this.svgViewBox.height}\n              viewBox={this.svg.attrs.viewBox}>\n              {this.svg.childs.map((c: any, i: any) => this.renderSvg(c, i))}\n            </Svg>\n          </View>\n\n          {/* Texts in the figure */}\n          {(this.props.testMode || ALWAYS_RENDER_TEXT_NATIVE)\n              && this.texts.map((t, index) => {\n            return (\n              <Draggable\n                key={index}\n                disabled={true}\n                scale={this.diagramScale}\n                style={{\n                  position: \"absolute\",\n                  left: t.location.x,\n                  top: t.location.y,\n                }}>\n                {(!this.props.testMode || this.state.hasTestLayouts)\n                  && <SvgTextComponent\n                    text={t.diagramAlternative || t}\n                    asHint={this.props.testMode && this.props.testHints\n                      && !this.state.correctTextLocation[index]}\n                    />}\n              </Draggable>);\n            })}\n\n          {/* Exempted texts, which are always a part of the figure */}\n          {this.exemptedTexts.map((t, index) => {\n            return (\n              <Draggable\n                key={index}\n                disabled={true}\n                scale={this.diagramScale}\n                style={{\n                  position: \"absolute\",\n                  left: t.location.x,\n                  top: t.location.y,\n                }}>\n                <SvgTextComponent\n                  text={t}\n                  asHint={false}\n                  />\n              </Draggable>);\n            })}\n        </Animated.View>\n\n        {/* The draggable test components */}\n        {/* TODO There is an annoying bug in expo, where if you drag a component\n          * too quickly (e.g. using a very fast swipe gesture), the thing moves\n          * even before the scrolling disables, which leaves the text hanging\n          * out there in the middle of the air, and it does not call any of the\n          * callbacks, so that, for example, scrolling does not get reenabled.\n          * One option to fix this is to disable scrolling altogether if the\n          * test layout permits it (e.g. if it auto-closes gaps).\n          */}\n        <Animated.ScrollView\n          scrollEnabled={this.testScrollEnabled}\n          scrollEventThrottle={16}\n          style={{\n            top: 0,\n            left: 0,\n            flexGrow: 1,  // Used to scale to the window dimensions\n            flexShrink: 1,\n          }}\n          onScroll={Animated.event([null], {\n              listener: (e: NativeSyntheticEvent<NativeScrollEvent>) => {\n                this.scrollOffset = e.nativeEvent.contentOffset\n              }\n            }\n          )}>\n\n          {/* The container used for adjusting the scale */}\n          <Animated.View\n            style={{\n              //backgroundColor: \"#F0F08080\",\n              position: \"absolute\",\n              top: Animated.multiply(this.diagramScale,\n                this.testLayout.basePosition.y),\n              left: Animated.multiply(this.diagramScale,\n                this.testLayout.basePosition.x),\n              flexGrow: 0,\n              flexShrink: 0,\n              width: 0,   // Need size 0x0 to correctly apply the scale; this\n              height: 0,  // is indeed okay because of visible overflow.\n              transform: [{\n                scale: this.testScale,\n              }],\n              //maxHeight: this.diagramMaxHeight,\n            }}>\n          {this.props.testMode && this.texts.map((t, index) => {\n            let dropRadius = 35;\n            let atTestLocation = !this.state.correctTextLocation[index];\n            if (!atTestLocation) return null;\n\n            let location =\n              atTestLocation && t.testLocation ? t.testLocation : t.location;\n            let dropLocations: { index: number, location: XY}[] = [];\n            if (atTestLocation && t.testLocation) {\n              dropLocations.push({\n                index: index,\n                location: t.location,\n              });\n            }\n\n            for (let i = 0; i < t.equivalents.length; i++) {\n              let e = t.equivalents[i];\n              if (!this.state.correctTextLocation[e.index] && e.testLocation) {\n                dropLocations.push({\n                  index: e.index,\n                  location: e.location,\n                });\n              }\n            }\n\n            let myScale\n              = new Animated.Value(1);\n            let myPaddingTop\n              = new Animated.Value(this.testLayout.borderSize.top);\n            let myPaddingBottom\n              = new Animated.Value(this.testLayout.borderSize.bottom);\n            let myPaddingLeft\n              = new Animated.Value(this.testLayout.borderSize.left);\n            let myPaddingRight\n              = new Animated.Value(this.testLayout.borderSize.right);\n            let backgroundColorOpacity = new Animated.Value(50);\n            let backgroundColor = backgroundColorOpacity.interpolate({\n                inputRange: [0, 100],\n                outputRange: [\n                  'rgba(200, 200, 200, 0)',\n                  'rgba(200, 200, 200, 1)'\n                ]\n            });\n\n            return (\n              <Draggable\n                key={index}\n                ref={d => t.draggable = d}\n                disabled={!atTestLocation}\n                dropLocation={dropLocations.map(l => {\n                  return {\n                    x: l.location.x - dropRadius,\n                    y: l.location.y - dropRadius,\n                    width: 2 * dropRadius,\n                    height: 2 * dropRadius\n                  };\n                })}\n                dropLocationRelative={this.svgView}\n                adjustDropLocationToScale={true}\n                dropLocationScale={this.diagramScale}\n                scale={this.testScale}\n                onDragStart={() => {\n                  this.testScrollEnabled.setValue(0);\n                  this.setState({ testScrollEnabled: false });\n                }}\n                onAfterInvalidDrop={() => {\n                  this.testScrollEnabled.setValue(\n                    this.testLayoutSupportsScroll ? 1 : 0)\n                  this.setState({ testScrollEnabled: true });\n                }}\n                onDropToLocation={(dropLocationIndex) => {\n                  let dropLocation = dropLocations[dropLocationIndex];\n\n                  // For equivalent components, swap them if the user dragged\n                  // one to the drop area of the other\n                  [this.texts[index], this.texts[dropLocation.index]]\n                    = [this.texts[dropLocation.index], this.texts[index]];\n                  [this.texts[index].index,\n                   this.texts[dropLocation.index].index]\n                    = [this.texts[dropLocation.index].index,\n                       this.texts[index].index];\n                  [this.texts[index].testLocation,\n                   this.texts[dropLocation.index].testLocation]\n                    = [this.texts[dropLocation.index].testLocation,\n                       this.texts[index].testLocation];\n\n                  let v = this.state.correctTextLocation.slice(0);\n                  v[index] = true;\n                  if (t.draggable) {\n                    let d = this.diagramScaleLast / this.testScaleLast;\n                    Animated.spring(myScale, {\n                      toValue: this.diagramScaleLast / this.testScaleLast,\n                      speed: 100,\n                    }).start();\n                    Animated.spring(myPaddingTop, {\n                      toValue: 0,\n                      speed: 100,\n                    }).start();\n                    Animated.spring(myPaddingBottom, {\n                      toValue: 0,\n                      speed: 100,\n                    }).start();\n                    Animated.spring(myPaddingLeft, {\n                      toValue: 0,\n                      speed: 100,\n                    }).start();\n                    Animated.spring(myPaddingRight, {\n                      toValue: 0,\n                      speed: 100,\n                    }).start();\n                    Animated.spring(backgroundColorOpacity, {\n                      toValue: 0,\n                      speed: 100,\n                    }).start();\n                    t.draggable.spring({\n                      toValue: {\n                        x: dropLocation.location.x * d - location.x\n                          - this.testLayout.basePosition.x * d\n                          - this.testLayout.marginSize.left\n                          - (t.layout ? t.layout.width : 0) * (1 - d) / 2,\n                        y: dropLocation.location.y * d - location.y\n                          + this.scrollOffset.y * d\n                            / this.diagramScaleLast\n                          - this.testLayout.basePosition.y * d\n                          - this.testLayout.marginSize.top\n                          - (t.layout ? t.layout.height : 0) * (1 - d) / 2,\n                      },\n                      speed: 100,\n                    },\n                    () => {\n                      this.testScrollEnabled.setValue(\n                        this.testLayoutSupportsScroll ? 1 : 0)\n                      this.setState({\n                        testScrollEnabled: true,\n                        correctTextLocation: v\n                      });\n\n                      this.testLayout.handleComponentRemoved(this.texts,\n                        index, this.state.correctTextLocation,\n                        () => this.setState({}));\n                    });\n                  }\n                  else {\n                    this.testScrollEnabled.setValue(\n                      this.testLayoutSupportsScroll ? 1 : 0)\n                    this.setState({ testScrollEnabled: true });\n                  }\n                }}\n                style={{\n                  position: \"absolute\",\n                  left: location.x,\n                  top: location.y,\n                }}>\n                {this.state.hasTestLayouts &&\n                  <Animated.View\n                    style={{\n                      backgroundColor: backgroundColor,\n                      //filter: \"blur(10px)\",\n                      paddingTop: myPaddingTop,\n                      paddingBottom: myPaddingBottom,\n                      paddingLeft: myPaddingLeft,\n                      paddingRight: myPaddingRight,\n                      marginTop: this.testLayout.marginSize.top,\n                      marginBottom: this.testLayout.marginSize.bottom,\n                      marginLeft: this.testLayout.marginSize.left,\n                      marginRight: this.testLayout.marginSize.right,\n                      transform: [{\n                        scale: myScale,\n                      }]\n                    }}>\n                    <SvgTextComponent text={t} />\n                  </Animated.View>}\n              </Draggable>);\n            })}\n          </Animated.View>\n        </Animated.ScrollView>\n\n        {/* Pre-measure the necessary text components */}\n        {this.premeasureTexts && this.premeasureTexts.length > 0 &&\n          !this.state.finishedPremeasure &&\n          <View style={{\n            width: 2000,\n            height: 0,\n            overflow: 'hidden',\n            position: 'absolute',\n            left: 0,\n            top: 0,\n          }}>\n            {this.premeasureTexts && this.premeasureTexts.map((t, index) => {\n              return <SvgTextComponent\n                key={index}\n                text={t}\n                onMeasure={layout => {\n                  if (t.onPremeasure) {\n                    t.onPremeasure(layout);\n                  }\n                  if (this.premeasureTexts &&\n                    this.premeasureTexts.map(t => !!t.layout)\n                    .reduce((c, t) => t && c, true)) {\n                    this.setState({finishedPremeasure: true});\n                  }\n                }}/>;\n            })}\n          </View>}\n\n        {/* Measure the test components */}\n        {this.props.testMode && !this.state.hasTestLayouts &&\n          (this.state.finishedPremeasure || !this.premeasureTexts ||\n            this.premeasureTexts.length === 0) &&\n          <View style={{\n            width: 2000,\n            height: 0,\n            overflow: 'hidden',\n            position: 'absolute',\n            left: 0,\n            top: 0,\n          }}>\n            {this.props.testMode && this.texts.map((t, index) => {\n              return <SvgTextComponent\n                key={index}\n                text={t}\n                onMeasure={layout => {\n                  this.handleSvgTextComponentLayout(t, layout)\n                }}/>;\n            })}\n          </View>}\n      </Animated.View>\n    );\n  }\n}\n","\nexport type BmcItem = {\n  chapter: number | string,\n  part: string | null,\n  label: string,\n  heading?: string,\n}\n\nexport type BmcBook = {\n  title: string,\n  notes?: string[],\n  items: BmcItem[],\n}\n\nexport type BmcLibrary = {\n  contents: BmcBook[]\n}\n\n\nconst BMC_GENESIS : BmcBook = {\n  title: \"Genesis\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Creation\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Garden of Eden/Adam and Eve\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Fall\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Cain and Abel\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Genealogy of Adam\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Noah builds the Ark\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Great Flood\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"End of the Flood\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Covenant of the Rainbow\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Genealogy of Noah\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Tower of Babel, genealogy of Shem\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Call of Abram\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Lot leaves Abram\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Melchizedek\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Abram's righteousness through faith, God's land covenant\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Birth of Ishmael\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Names changed to Abraham and Sarah, covenant of circumcision\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Intercessory prayer\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Destruction of Sodom and Gomorrah\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Abraham's lie/God's protection\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Birth of Isaac\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Sacrifice of Isaac\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Death of Sarah, burial in Machpelah\"\n    },\n    {\n      chapter: 24,\n      part: \"a\",\n      label: \"Rebekah in Haran\"\n    },\n    {\n      chapter: 24,\n      part: \"b\",\n      label: \"Marriage of Isaac and Rebekah\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Death of Abraham, birth of Esau and Jacob\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Treaty between Isaac and Abimelech\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Isaac blesses Jacob\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"Vow at Bethel\"\n    },\n    {\n      chapter: 29,\n      part: null,\n      label: \"Jacob, Laban, Leah, Rachel\"\n    },\n    {\n      chapter: 30,\n      part: null,\n      label: \"Jacob's prosperity\"\n    },\n    {\n      chapter: 31,\n      part: null,\n      label: \"Jacob's return\"\n    },\n    {\n      chapter: 32,\n      part: null,\n      label: \"Jacob wrestles with God/name changed to Israel\"\n    },\n    {\n      chapter: 33,\n      part: null,\n      label: \"Meeting Esau\"\n    },\n    {\n      chapter: 34,\n      part: null,\n      label: \"Dinah incident\"\n    },\n    {\n      chapter: 35,\n      part: null,\n      label: \"El-Bethel covenant renewal, death of Isaac\"\n    },\n    {\n      chapter: 36,\n      part: null,\n      label: \"Genealogy of Esau\"\n    },\n    {\n      chapter: 37,\n      part: null,\n      label: \"Joseph is sold by his brothers\"\n    },\n    {\n      chapter: 38,\n      part: null,\n      label: \"Judah and Tamar\"\n    },\n    {\n      chapter: 39,\n      part: null,\n      label: \"Joseph is falsely accused\"\n    },\n    {\n      chapter: 40,\n      part: null,\n      label: \"Dreams of cupbearer and baker\"\n    },\n    {\n      chapter: 41,\n      part: null,\n      label: \"Joseph the Prime Minister\"\n    },\n    {\n      chapter: 42,\n      part: null,\n      label: \"Meeting the brothers 1\"\n    },\n    {\n      chapter: 43,\n      part: null,\n      label: \"Meeting the brothers 2\"\n    },\n    {\n      chapter: 44,\n      part: null,\n      label: \"Benjamin/silver cup\"\n    },\n    {\n      chapter: 45,\n      part: null,\n      label: \"Joseph makes himself known to his brothers\"\n    },\n    {\n      chapter: 46,\n      part: null,\n      label: \"Jacob's family moves to Egypt (70 people)\"\n    },\n    {\n      chapter: 47,\n      part: null,\n      label: \"Settling in Goshen\"\n    },\n    {\n      chapter: 48,\n      part: null,\n      label: \"Jacob blesses Ephraim and Manasseh\"\n    },\n    {\n      chapter: 49,\n      part: null,\n      label: \"Jacob blesses his 12 sons\"\n    },\n    {\n      chapter: 50,\n      part: null,\n      label: \"Death of Jacob and Joseph\"\n    },\n  ]\n};\n\nconst BMC_EXODUS : BmcBook = {\n  title: \"Exodus\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Suffering\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Moses\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Calling\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Return\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Meeting Pharaoh\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Promise\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Blood\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"FGF (frogs, gnats, flies)\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"PBH (pestilence, boils, hail)\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"LD (locusts, darkness)\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Warning of the firstborns' death\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Passover\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Escape\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Crossing Red Sea\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Song of salvation, bitter water\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Manna\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Meribah 1, Amalekites\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Jethro/delegation\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Sinai Covenant\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Ten Commandments\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Laws concerning life\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Laws concerning property\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Laws concerning feasts\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Covenant wedding ceremony\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"ATG (Ark of the Covenant, table for bread, golden lampstand)\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Veil\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Altar\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"Priestly garments\"\n    },\n    {\n      chapter: 29,\n      part: null,\n      label: \"Priestly regulations\"\n    },\n    {\n      chapter: 30,\n      part: null,\n      label: \"Basin\"\n    },\n    {\n      chapter: 31,\n      part: null,\n      label: \"Skilled workers\"\n    },\n    {\n      chapter: 32,\n      part: null,\n      label: \"Golden calf\"\n    },\n    {\n      chapter: 33,\n      part: null,\n      label: \"Intercession\"\n    },\n    {\n      chapter: 34,\n      part: null,\n      label: \"Second tablets of the Ten Commandments\"\n    },\n    {\n      chapter: 35,\n      part: null,\n      label: \"Offerings\"\n    },\n    {\n      chapter: 36,\n      part: null,\n      label: \"Tabernacle construction begins\"\n    },\n    {\n      chapter: 37,\n      part: null,\n      label: \"ATGI (Ark of the Covenant, table for bread, \"\n        + \"golden lampstand, altar of incense)\"\n    },\n    {\n      chapter: 38,\n      part: null,\n      label: \"AB (altar, basin)\"\n    },\n    {\n      chapter: 39,\n      part: null,\n      label: \"Completion of priestly garments/completion of tabernacle\"\n    },\n    {\n      chapter: 40,\n      part: null,\n      label: \"Dedication\"\n    },\n  ]\n};\n\nconst BMC_LEVITICUS : BmcBook = {\n  title: \"Leviticus\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Burnt offering\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Grain offering\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Peace offering\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Sin offering\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Guilt offering (for restitution)\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Duties of priests 1\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Duties of priests 2\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Consecration of priests\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Aaron's first sacrifice\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Death of Nadab and Abihu\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"CU (clean-unclean) food\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Purification after childbirth\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Laws for leprosy\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Laws for cleansing lepers\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Laws about bodily discharges\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"The Day of Atonement\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Laws for blood\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Sexual morality 1\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Be holy\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Sexual morality 2\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Qualifications for priests\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Portions of priests\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"7 feasts\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"LBB (lamp, bread of the Presence, blasphemer)\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Sabbath year (every 7 years), Jubilee (every 50 years)\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"BC (blessings, curses)\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Vows, tithes\"\n    },\n  ]\n};\n\nconst BMC_NUMBERS : BmcBook = {\n  title: \"Numbers\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Census of Israel's army (603,550)\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Formation of camps\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Number of all Levites (1 month and up -- 22,000)\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Number of Levites in ministry (30-50 years old -- 8,580)\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"3 Purification laws (camp, sin, marriage)\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Nazarite laws\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Leaders' offerings\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Consecration of Levites\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Second Passover\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Departure\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Grumbling of the Israelites\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Grumbling of Miriam and Aaron\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"12 spies\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"40-year punishment\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Summary of sacrifices\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Rebellion of Korah, Dathan, Abiram\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Budding of Aaron's staff\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Duties and portions of priests and Levites\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Purification laws\"\n    },\n    {\n      chapter: 20,\n      part: \"a\",\n      label: \"Meribah 2\"\n    },\n    {\n      chapter: 20,\n      part: \"b\",\n      label: \"Aaron's death on Mt. Hor\"\n    },\n    {\n      chapter: 21,\n      part: \"a\",\n      label: \"Bronze snake\"\n    },\n    {\n      chapter: 21,\n      part: \"b\",\n      label: \"Conquest of Heshbon, Bashan\"\n    },\n    {\n      chapter: \"22-25\",\n      part: null,\n      label: \"Balaam-Balak incident\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Census of Israel's army (601,730)\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Joshua the new leader\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"Feasts 1\"\n    },\n    {\n      chapter: 29,\n      part: null,\n      label: \"Feasts 2\"\n    },\n    {\n      chapter: 30,\n      part: null,\n      label: \"Vows\"\n    },\n    {\n      chapter: 31,\n      part: null,\n      label: \"Revenge against the Midianites\"\n    },\n    {\n      chapter: 32,\n      part: null,\n      label: \"Division of land (east of Jordan)\"\n    },\n    {\n      chapter: 33,\n      part: null,\n      label: \"Summary of wilderness journey\"\n    },\n    {\n      chapter: 34,\n      part: null,\n      label: \"Boundaries of land (west of Jordan)\"\n    },\n    {\n      chapter: 35,\n      part: null,\n      label: \"Cities of refuge\"\n    },\n    {\n      chapter: 36,\n      part: null,\n      label: \"Law of land inheritance for daughters \"\n        + \"(Zelophehad's daughters)\"\n    },\n  ]\n};\n\nconst BMC_DEUTERONOMY : BmcBook = {\n  title: \"Deuteronomy\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      heading: \"Summary of Numbers\",\n      label: \"12 spies\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Conquest of Heshbon\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Conquest of Bashan, Moses forbidden to \"\n        + \"enter the Promised Land\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Moses' exhortation\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      heading: \"Summary of Exodus\",\n      label: \"Ten Commandments\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Shema\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Destroy completely!\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Do not forget!\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Golden calf\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Second tablets of the Ten Commandments, \"\n        + \"Circumcise your heart!\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"BC 1 (blessings, curses)\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      heading: \"Summary of Leviticus\",\n      label: \"Pagan idols\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Israelite idols\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"CU (clean, unclean) food\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Sabbath year\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"3 feasts (Passover, Weeks, Booths)\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Laws concerning kings\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Provision for priests, promise for a prophet like Moses\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Cities of refuge\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Laws concerning warfare\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Miscellaneous laws 1\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Sexual morality\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"ACV (assembly, camp, vow)\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Miscellaneous laws 2\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Miscellaneous laws 3\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Tithes\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      heading: \"Covenant in the plains of Moab\",\n      label: \"Curses\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"BC 2 (blessings, curses)\"\n    },\n    {\n      chapter: 29,\n      part: null,\n      label: \"Covenant in the plains of Moab 1\"\n    },\n    {\n      chapter: 30,\n      part: null,\n      label: \"Covenant in the plains of Moab 2\"\n    },\n    {\n      chapter: 31,\n      part: null,\n      label: \"Moses commissions Joshua as his successor\"\n    },\n    {\n      chapter: 32,\n      part: null,\n      label: \"Song of Moses\"\n    },\n    {\n      chapter: 33,\n      part: null,\n      label: \"Blessing of Moses\"\n    },\n    {\n      chapter: 34,\n      part: null,\n      label: \"Death of Moses\"\n    },\n  ]\n};\n\nconst BMC_JOSHUA : BmcBook = {\n  title: \"Joshua\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Preparation for conquest\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Two spies/Rahab\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Crossing the Jordan\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Memorial stones\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"CPMC (circumcision, Passover, manna, the Commander)\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Conquest of Jericho\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Achan's sin\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Conquest of Ai\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Gibeonite deception\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Conquest of the south (\\\"Sun, stand still\\\")\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Conquest of the north\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Summary of conquest (33 kings)\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Division of the land (east of Jordan)\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Caleb's hill country\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Tribe of Judah\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Tribe of Ephraim\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Tribe of Manasseh\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Tribe of Benjamin\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Other tribes\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Cities of refuge\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Cities of the Levites (48)\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Altar of Witness\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Joshua's farewell sermon\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Shechem Covenant\"\n    },\n  ]\n};\n\nconst BMC_JUDGES : BmcBook = {\n  title: \"Judges\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Failure in conquest\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Spiritual failure\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Othniel, Ehud, Shamgar\"\n    },\n    {\n      chapter: 4,\n      part: \"a\",\n      label: \"Deborah at the hill country of Ephraim\"\n    },\n    {\n      chapter: 4,\n      part: \"b\",\n      label: \"Victory of Deborah and Barak\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Song of victory\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Calling of Gideon\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Gideon's victory\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Gideon's idol\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Abimelech the evildoer\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Tola, Jair\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Jephthah\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Jephthah's conflict with Ephraim, Ibzan, Elon, Abdon\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Samson's birth\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Samson's marriage\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Samson's victory\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Samson and Delilah\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Micah's idol\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Danites' idol\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"A Levite and his concubine\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"War against [the] Benjaminites\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Preservation of the Benjaminites\"\n    },\n  ]\n};\n\nconst BMC_RUTH : BmcBook = {\n  title: \"Ruth\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Naomi and her family sojourn in Moab, \"\n        + \"Ruth follows Naomi to Bethlehem\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Ruth meets Boaz\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Kinsman-redeemer\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Boaz marries Ruth (Obed--Jesse--David)\"\n    },\n  ]\n};\n\nconst BMC_1_SAMUEL : BmcBook = {\n  title: \"1 Samuel\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Hannah's prayer\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Eli's sin, birth of Samuel\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Calling of Samuel\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Capture of the Ark\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Plagues of the Ark\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Return of the Ark\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Mizpah revival\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Request for king\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Meeting of Saul and Samuel\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Anointing of Saul\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Ammonite war\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Samuel's farewell sermon\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Saul's foolish sacrifice\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Jonathan's victory by faith\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"To obey is better than sacrifice\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Anointing of David\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"David kills Goliath\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Meeting of David and Jonathan, Saul's jealousy 1\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Saul's jealousy 2\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Friendship of David and Jonathan\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Escape to Nob\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Adullam 400\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Saving Keilah\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Corner of Saul's robe\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Samuel's death, marriage to Abigail\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Saul's spear and water jug\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Receiving Ziklag\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"Medium of Endor\"\n    },\n    {\n      chapter: 29,\n      part: null,\n      label: \"Philistines distrust David\"\n    },\n    {\n      chapter: 30,\n      part: null,\n      label: \"Revenge against the Amalekites\"\n    },\n    {\n      chapter: 31,\n      part: null,\n      label: \"Saul's death\"\n    },\n  ]\n};\n\nconst BMC_2_SAMUEL : BmcBook = {\n  title: \"2 Samuel\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"David's lament\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"King of Judah in Hebron (7 years)\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Abner's death\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Ish-bosheth's death\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"King of all Israel in Jerusalem (33 years)\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"The Ark of the Covenant brought to Jerusalem\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Davidic Covenant (Nathan's Oracle)\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Military victories\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Mephibosheth at king's table\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Ammonite war\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Bathsheba\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Nathan's rebuke / David's repentance\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Break-up of the family\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Absalom's escape and return\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Absalom's mutiny\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Shimei curses David\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Two strategies (Hushai vs. Ahithophel)\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Absalom's death\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"David's return\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Sheba's mutiny\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Avenging the Gibeonites\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"David's testimony\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"David's last words and his mighty men\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"David's foolish census / Araunah's (= Ornan) threshing floor\"\n    },\n  ]\n};\n\nconst BMC_1_KINGS : BmcBook = {\n  title: \"1 Kings\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"King Solomon\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Purge\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Solomon's wisdom\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Prosperity 1\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Preparation for Temple construction\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Temple construction begins\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Construction of palace, Temple furnishings\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"The Ark of the Covenant brought to the Temple\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Solomonic Covenant\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Prosperity 2 (Queen of Sheba)\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Fall and death of Solomon\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Divided Kingdom\"\n    },\n    {\n      chapter: 12,\n      part: \"S\",\n      label: \"Rehoboam\"\n    },\n    {\n      chapter: 12,\n      part: \"N\",\n      label: \"Jeroboam\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Old prophet and young prophet\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Shishak invasion\"\n    },\n    {\n      chapter: 15,\n      part: \"S\",\n      label: \"Abijam (= Abijah), Asa, Jehoshaphat\"\n    },\n    {\n      chapter: 15,\n      part: \"N\",\n      label: \"Nadab, Baasha\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Elah, Zimri, Omri, Ahab\"\n    },\n    {\n      chapter: 17,\n      part: \"a\",\n      label: \"Elijah at Brook Cherith\"\n    },\n    {\n      chapter: 17,\n      part: \"b\",\n      label: \"Elijah at Zarephath\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Elijah at Mt. Carmel\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Elijah at Mt. Horeb (= Mt. Sinai)\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Wars with Syria\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Naboth's vineyard\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Ahab's death\"\n    },\n  ]\n};\n\nconst BMC_2_KINGS : BmcBook = {\n  title: \"2 Kings\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Ahaziah\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Ascension of Elijah (chariots of fire)\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Jehoram (= Joram)\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Elisha's 4 miracles\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Naaman\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"God protects Elisha\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"4 lepers\"\n    },\n    {\n      chapter: 8,\n      part: \"N\",\n      label: \"Shunammite woman's land\"\n    },\n    {\n      chapter: 8,\n      part: \"S\",\n      label: \"Jehoram (= Joram), Ahaziah\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Jehu\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Jehu's purge\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Athaliah\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Jehoash (= Joash)\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Jehoahaz, Jehoash (= Joash)\"\n    },\n    {\n      chapter: 14,\n      part: \"S\",\n      label: \"Amaziah\"\n    },\n    {\n      chapter: 14,\n      part: \"N\",\n      label: \"Jeroboam II\"\n    },\n    {\n      chapter: 15,\n      part: \"S\",\n      label: \"Azariah (= Uzziah), Jotham\"\n    },\n    {\n      chapter: 15,\n      part: \"N\",\n      label: \"Zechariah, Shallum, Menahem, Pekahiah, Pekah\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Ahaz\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Hoshea (last king of Israel)\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Hezekiah\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Hekekiah's prayer\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Hezekiah's illness\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Manasseh, Amon\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Josiah (Book of the Law found)\"\n    },\n    {\n      chapter: 23,\n      part: \"a\",\n      label: \"Josiah's reforms\"\n    },\n    {\n      chapter: 23,\n      part: \"b\",\n      label: \"Jehoahaz\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Jehoiakim, Jehoiachin, Zedekiah (last king of Judah)\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Fall of Judah\"\n    },\n  ]\n};\n\nconst BMC_1_CHRONICLES : BmcBook = {\n  title: \"1 Chronicles\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Genealogy of Adam\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Genealogy of Judah\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Genealogy of David\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Southern tribes\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Eastern tribes\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Levites\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Northern tribes\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Tribe of Benjamin\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"List of returned exiles\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Saul's death\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"King David\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"David's mighty men\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Uzzah's death\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"David's fame\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"The Ark of the Covenant brought to Jerusalem\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"David's prayer of thanksgiving\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Davidic Covenant (Nathan's Oracle)\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Early victories of war\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Late victories of war\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Ammonite war\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"David's foolish census/Ornan's (= Araunah) threshing floor\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Preparation for Temple construction\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Duties of Levites\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Duties of priests\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Duties of musicians\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Duties of gatekeepers\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Military and administrative organization\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"David's charge to Solomon to build the Temple\"\n    },\n    {\n      chapter: 29,\n      part: null,\n      label: \"Offerings for Temple construction\"\n    },\n  ]\n};\n\nconst BMC_2_CHRONICLES : BmcBook = {\n  title: \"2 Chronicles\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Solomon's wisdom\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Preparation for Temple construction\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Temple construction begins\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Temple furnishings\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"The Ark of the Covenant brought to the Temple\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Solomon's dedication prayer and thanksgiving\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Dedication of the Temple/Feast of Tabernacles\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Prosperity\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Solomon's death\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Divided kingdom -- Rehoboam\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Rehoboam strengthens kingdom\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Shishak invasion\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Abijah (= Abijam)\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Reign of Asa\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Asa's reforms\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Hanani rebukes Asa (verse 9)\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Jehoshaphat's reforms\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Ahab's death\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Jehu (son of Hanani) rebukes Jehoshaphat\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Jehoshaphat's prayer\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Jehoram (= Joram)\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Ahaziah\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Athaliah\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Joash (= Jehoash)\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Amaziah\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Uzziah (= Azariah)\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Jotham\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"Ahaz\"\n    },\n    {\n      chapter: 29,\n      part: null,\n      label: \"Hezekiah cleanses Temple\"\n    },\n    {\n      chapter: 30,\n      part: null,\n      label: \"Hezekiah restores Passover\"\n    },\n    {\n      chapter: 31,\n      part: null,\n      label: \"Hezekiah's reforms\"\n    },\n    {\n      chapter: 32,\n      part: null,\n      label: \"Hezekiah's death\"\n    },\n    {\n      chapter: 33,\n      part: null,\n      label: \"Manasseh, Amon\"\n    },\n    {\n      chapter: 34,\n      part: null,\n      label: \"Josiah's reforms\"\n    },\n    {\n      chapter: 35,\n      part: null,\n      label: \"Josiah's grand Passover celebration\"\n    },\n    {\n      chapter: 36,\n      part: null,\n      label: \"Jehoahaz, Jehoiakim, Jehoiachin, \"\n        + \"Zedekiah (last king of Judah)\"\n    },\n  ]\n};\n\nconst BMC_MATTHEW : BmcBook = {\n  title: \"Matthew\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Genealogy, Birth of Jesus\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Magi, Herod\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"John the Baptist/Baptism of Jesus\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Temptations of Jesus\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Beatitudes:\"\n    },\n    {\n      chapter: 5,\n      part: \"1\",\n      label: \"Poor in Spirit\"\n    },\n    {\n      chapter: 5,\n      part: \"2\",\n      label: \"Mourn\"\n    },\n    {\n      chapter: 5,\n      part: \"3\",\n      label: \"Meek\"\n    },\n    {\n      chapter: 5,\n      part: \"4\",\n      label: \"Hungry and thirsty for righteousness\"\n    },\n    {\n      chapter: 5,\n      part: \"5\",\n      label: \"Merciful\"\n    },\n    {\n      chapter: 5,\n      part: \"6\",\n      label: \"Pure in heart\"\n    },\n    {\n      chapter: 5,\n      part: \"7\",\n      label: \"Peacemakers\"\n    },\n    {\n      chapter: 5,\n      part: \"8\",\n      label: \"Persecuted\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"APF (alms, prayer, fasting)\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"ASK (ask, seek, knock)\"\n    },\n    {\n      chapter: 8,\n      part: \"a\",\n      label: \"Centurion\"\n    },\n    {\n      chapter: 8,\n      part: \"b\",\n      label: \"Storm\"\n    },\n    {\n      chapter: 8,\n      part: \"c\",\n      label: \"Two demoniacs\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"PBB (paralytic, bleeding woman, blind men)\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"12 disciples: \"\n        + \"Peter--Andrew, James--John, Philip--Bartholomew, \"\n        + \"Thomas--Matthew, James--Thaddaeus, Simon--Judas\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"\\\"Come to me\\\"\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Sabbath\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"PK (parables of Kingdom)\"\n    },\n    {\n      chapter: 14,\n      part: \"a\",\n      label: \"Death of John the Baptist\"\n    },\n    {\n      chapter: 14,\n      part: \"b\",\n      label: \"Five loaves and two fish\"\n    },\n    {\n      chapter: 14,\n      part: \"c\",\n      label: \"Walking on water\"\n    },\n    {\n      chapter: 15,\n      part: \"a\",\n      label: \"Hypocrisy of elders' tradition\"\n    },\n    {\n      chapter: 15,\n      part: \"b\",\n      label: \"Canaanite woman (= Syrophoenician woman)\"\n    },\n    {\n      chapter: 15,\n      part: \"c\",\n      label: \"Seven loaves and a few fish\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Peter's confession\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Transfiguration\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Little children\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Rich Young Ruler\"\n    },\n    {\n      chapter: 20,\n      part: \"a\",\n      label: \"11th-hour worker\"\n    },\n    {\n      chapter: 20,\n      part: \"b\",\n      label: \"Two blind men\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Triumphal Entry of Jesus, cleansing the Temple\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Great Commandment\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"7 woes\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"SET (signs of the end times)\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"VT (virgin, talent parables)\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Alabaster jar, Lord's Supper, Gethsemane, arrest, \"\n        + \"Peter's denial and repentance\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Death on the Cross\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"Resurrection, Great Commission\"\n    },\n  ]\n};\n\nconst BMC_MARK : BmcBook = {\n  title: \"Mark\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Beginning of the gospel of Jesus\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Paralytic, call of Levi (= Matthew), fasting controversy\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Jesus calls the Twelve\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Parables of the Kingdom, storm\"\n    },\n    {\n      chapter: 5,\n      part: \"a\",\n      label: \"Demoniac\"\n    },\n    {\n      chapter: 5,\n      part: \"b\",\n      label: \"Bleeding woman, Jairus' daughter\"\n    },\n    {\n      chapter: 6,\n      part: \"a\",\n      label: \"Sending out the Twelve\"\n    },\n    {\n      chapter: 6,\n      part: \"b\",\n      label: \"Death of John the Baptist\"\n    },\n    {\n      chapter: 6,\n      part: \"c\",\n      label: \"Five loaves and two fish\"\n    },\n    {\n      chapter: 6,\n      part: \"d\",\n      label: \"Walking on water\"\n    },\n    {\n      chapter: 7,\n      part: \"a\",\n      label: \"Hypocrisy of elders' traditions\"\n    },\n    {\n      chapter: 7,\n      part: \"b\",\n      label: \"Syrophoenician woman (= Canaanite woman)\"\n    },\n    {\n      chapter: 8,\n      part: \"a\",\n      label: \"Seven loaves and a few fish\"\n    },\n    {\n      chapter: 8,\n      part: \"b\",\n      label: \"Second touch\"\n    },\n    {\n      chapter: 8,\n      part: \"c\",\n      label: \"Peter's confession\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Transfiguration\"\n    },\n    {\n      chapter: 10,\n      part: \"a\",\n      label: \"Rich young ruler, servanthood (verse 45)\"\n    },\n    {\n      chapter: 10,\n      part: \"b\",\n      label: \"Bartimaeus\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Triumphal Entry of Jesus, cleansing the Temple\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Wicked tenants, resurrection controversy, \"\n        + \"Great Commandment, widow's two coins\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"SET (signs of the end times)\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Alabaster jar, Lord's Supper, Gethsemane, arrest, \"\n        + \"Peter's denial and repentance\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Death on the Cross\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Resurrection, Great Commission, ascension\"\n    },\n  ]\n};\n\nconst BMC_LUKE : BmcBook = {\n  title: \"Luke\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"John the Baptist, Mary and Elizabeth\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Birth of Jesus: SAS (shepherds, Anna, Simeon)\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Baptism and genealogy of Jesus\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Temptations of Jesus\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Jesus calls Peter\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Jesus calls the Twelve, Sermon on the plain\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"CNA (centurion, Nain, alabaster jar)\"\n    },\n    {\n      chapter: 8,\n      part: \"a\",\n      label: \"Storm\"\n    },\n    {\n      chapter: 8,\n      part: \"b\",\n      label: \"Demoniac\"\n    },\n    {\n      chapter: 8,\n      part: \"c\",\n      label: \"Jairus' daughter\"\n    },\n    {\n      chapter: 9,\n      part: \"a\",\n      label: \"Sending out the Twelve\"\n    },\n    {\n      chapter: 9,\n      part: \"b\",\n      label: \"Five loaves and two fish\"\n    },\n    {\n      chapter: 9,\n      part: \"c\",\n      label: \"Peter's confession\"\n    },\n    {\n      chapter: 9,\n      part: \"d\",\n      label: \"Transfiguration\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Sending out the seventy-two, Good Samaritan\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"LAB6 (Lord's Prayer, ask-seek-knock, Beelzebul, 6 woes)\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Rich fool\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Repent! Enter through the narrow door!\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Cost of discipleship (3 P's)\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Return of the prodigal son\" //Lost SCP (Sheep, Coin, Prodigal)\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Shrewd manager, poor Lazarus\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Unworthy servant\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"How to pray (persistent widow, tax collector)\"\n    },\n    {\n      chapter: 19,\n      part: \"a\",\n      label: \"Zacchaeus\"\n    },\n    {\n      chapter: 19,\n      part: \"b\",\n      label: \"Triumphal Entry of Jesus, cleansing the Temple\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Wicked tenants, resurrection controversy\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Widow's two coins, SET (signs of the end times)\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Lord's Supper, Gethsemane, arrest, \"\n        + \"Peter's denial and repentance\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Death on the Cross\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Resurrection, road to Emmaus, ascension\"\n    },\n  ]\n};\n\nconst BMC_JOHN : BmcBook = {\n  title: \"John\",\n  notes: [\n    \"(* after the \\\"I AM\\\" expressions)\",\n  ],\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Word, Lamb of God\"\n    },\n    {\n      chapter: 2,\n      part: \"a\",\n      label: \"Wedding at Cana\"\n    },\n    {\n      chapter: 2,\n      part: \"b\",\n      label: \"Cleansing the Temple\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Nicodemus\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Samaritan woman\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Invalid at the Bethesda Pool\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Five loaves and two fish, The Bread of life*\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Feast of Booths/Rivers of Living Water (Holy Spirit)\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Adulterous woman, The Light of the world*\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Healing a blind man\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"The Door of the sheep*, The Good Shepherd*\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Raising Lazarus, The Resurrection and the Life*\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"Grain of wheat\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Lord's Supper, washing feet, New Commandment\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"The Way, the Truth, and the Life*\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"The Vine*\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Holy Spirit the Helper\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"High priestly prayer of Jesus\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Arrest, Peter's denial\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Death on the Cross\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Resurrection\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Feed my sheep\"\n    },\n  ]\n};\n\nconst BMC_ACTS : BmcBook = {\n  title: \"Acts\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Promise of Holy Spirit, Great Commission, ascension, \"\n        + \"choosing of Matthias\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Pentecost (coming of Holy Spirit), \"\n        + \"birth of the Jerusalem church\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Healing of the lame man\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Peter and John before the Sanhedrin\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Death of Ananias and Sapphira\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"7 deacons\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Stephen's martyrdom\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Philip the deacon/Judea and Samaria mission\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Saul's conversion on the road to Damascus\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Meeting of Cornelius and Peter\"\n    },\n    {\n      chapter: 11,\n      part: \"a\",\n      label: \"Peter's mission report\"\n    },\n    {\n      chapter: 11,\n      part: \"b\",\n      label: \"\\\"Christians\\\"\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"James' martyrdom, Peter's escape, Herod Agrippa's death\"\n    },\n    {\n      chapter: 13,\n      part: \"a\",\n      label: \"Commissioning of missionaries (Saul and Barnabas)\"\n    },\n    {\n      chapter: 13,\n      part: \"b\",\n      label: \"First missionary journey begins: \"\n        + \"Antioch--Cyprus (Saul becomes Paul)--Perga--Pisidia Antioch\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"First missionary journey continues: \"\n        + \"Iconium--Lystra--Derbe--Lystra--Iconium--\"\n        + \"Pisidia Antioch--Perga--Attalia--Antioch\"\n    },\n    {\n      chapter: 15,\n      part: \"a\",\n      label: \"Jerusalem Council\"\n    },\n    {\n      chapter: 15,\n      part: \"b\",\n      label: \"Second missionary journey begins \"\n        + \"(Parting of Paul and Barnabas): Antioch--Syria--Cilicia\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Second missionary journey continues: \"\n        + \"Derbe--Lystra--Troas--Neapolis--Philippi\"\n    },\n    {\n      chapter: 16,\n      part: \"a\",\n      label: \"Lystra: Timothy joins Paul\"\n    },\n    {\n      chapter: 16,\n      part: \"b\",\n      label: \"Troas: Macedonian Call, Luke joins Paul\"\n    },\n    {\n      chapter: 16,\n      part: \"c\",\n      label: \"Philippi: Lydia, jailer\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Second missionary journey continues:\"\n    },\n    {\n      chapter: 17,\n      part: \"a\",\n      label: \"Thessalonica\"\n    },\n    {\n      chapter: 17,\n      part: \"b\",\n      label: \"Berea\"\n    },\n    {\n      chapter: 17,\n      part: \"c\",\n      label: \"Athens\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Second missionary journey continues: \"\n        + \"Corinth--Cenchreae--Ephesus--Caesarea--Jerusalem--Antioch\"\n    },\n    {\n      chapter: 18,\n      part: \"a\",\n      label: \"Corinth: Aquila and Priscilla\"\n    },\n    {\n      chapter: 18,\n      part: \"b\",\n      label: \"Cenchreae: Paul's vow\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Third missionary journey begins, \"\n        + \"Priscilla and Aquila teach Apollos in Ephesus\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Third missionary journey continues\"\n    },\n    {\n      chapter: 19,\n      part: null,\n      label: \"Ephesus: Hall of Tyrannus, great revival, riot\"\n    },\n    {\n      chapter: 20,\n      part: null,\n      label: \"Third missionary journey continues: \"\n        + \"Macedonia--Greece (Corinth)--Philippi--Troas--Miletus\"\n    },\n    {\n      chapter: 20,\n      part: \"a\",\n      label: \"Troas: Eutychus\"\n    },\n    {\n      chapter: 20,\n      part: \"b\",\n      label: \"Miletus: Farewell with Ephesian elders\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"Third missionary journey continues: \"\n        + \"Tyre--Caesarea--Jerusalem\"\n    },\n    {\n      chapter: 21,\n      part: \"a\",\n      label: \"Tyre: Warning 1 by disciples\"\n    },\n    {\n      chapter: 21,\n      part: \"b\",\n      label: \"Caesarea: Warning 2 by Agabus\"\n    },\n    {\n      chapter: 21,\n      part: \"c\",\n      label: \"Jerusalem: Paul's arrest\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Defense in the Temple\"\n    },\n    {\n      chapter: 23,\n      part: null,\n      label: \"Defense before the Sanhedrin, \"\n        + \"Paul strengthened by Jesus in a vision\"\n    },\n    {\n      chapter: 24,\n      part: null,\n      label: \"Defense before Felix\"\n    },\n    {\n      chapter: 25,\n      part: null,\n      label: \"Defense before Festus/appeal to Caesar\"\n    },\n    {\n      chapter: 26,\n      part: null,\n      label: \"Defense before Herod Agrippa II\"\n    },\n    {\n      chapter: 27,\n      part: null,\n      label: \"Fourth missionary journey begins: \"\n        + \"Caesarea--Sidon--Fair Havens\"\n    },\n    {\n      chapter: 27,\n      part: \"a\",\n      label: \"Caesarea: Fourth missionary journey begins\"\n    },\n    {\n      chapter: 27,\n      part: \"b\",\n      label: \"Northeaster: Shipwreck\"\n    },\n    {\n      chapter: 28,\n      part: null,\n      label: \"Fourth missionary journey continues: Malta--Rome\"\n    },\n    {\n      chapter: 28,\n      part: \"a\",\n      label: \"Malta: Snake incident\"\n    },\n    {\n      chapter: 28,\n      part: \"b\",\n      label: \"Rome: Arrival, unhindered preaching of the gospel\"\n    },\n  ]\n};\n\nconst BMC_ROMANS : BmcBook = {\n  title: \"Romans\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      heading: \"Doctrine of Sin\",\n      label: \"Gentiles' Sin\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"Jews' Sin\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"Sin of all mankind\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      heading: \"Doctrine of Salvation\",\n      label: \"Justification by faith 1\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Justification by faith 2\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      heading: \"Doctrine of Sanctification\",\n      label: \"Baptism\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"Law\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"Spirit\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      heading: \"Blessings of Israel\",\n      label: \"Israel's past\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"Israel's present\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"Israel's future\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      heading: \"Christian Practice\",\n      label: \"Believers' life in the Church\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Believers' life in Society\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"Believers' life with one another\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      heading: \"\",\n      label: \"Summary\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Greetings\"\n    },\n  ]\n};\n\nconst BMC_REVELATION : BmcBook = {\n  title: \"Revelation\",\n  items: [\n    {\n      chapter: 1,\n      part: null,\n      label: \"Revelation of Jesus\"\n    },\n    {\n      chapter: 2,\n      part: null,\n      label: \"7 churches 1: ESPT (Ephesus, Smyrna, Pergamum, Thyatira)\"\n    },\n    {\n      chapter: 3,\n      part: null,\n      label: \"7 churches 2: SPL (Sardis, Philadelphia, Laodicea)\"\n    },\n    {\n      chapter: 4,\n      part: null,\n      label: \"Throne of God\"\n    },\n    {\n      chapter: 5,\n      part: null,\n      label: \"Worthy is the Lamb\"\n    },\n    {\n      chapter: 6,\n      part: null,\n      label: \"Judgment of 7 seals (6 seals are opened)\"\n    },\n    {\n      chapter: 7,\n      part: null,\n      label: \"The 144,000 of Israel saved, \"\n        + \"countless multitude of Gentiles\"\n    },\n    {\n      chapter: 8,\n      part: null,\n      label: \"7th seal is opened, \"\n        + \"Judgment of 7 trumpets begins (1-4 trumpets)\"\n    },\n    {\n      chapter: 9,\n      part: null,\n      label: \"Judgment of 7 trumpets continues (5, 6 trumpets)\"\n    },\n    {\n      chapter: 10,\n      part: null,\n      label: \"The little scroll\"\n    },\n    {\n      chapter: 11,\n      part: null,\n      label: \"The 7th trumpet\"\n    },\n    {\n      chapter: 12,\n      part: null,\n      label: \"The woman and the dragon\"\n    },\n    {\n      chapter: 13,\n      part: null,\n      label: \"Two beasts\"\n    },\n    {\n      chapter: 14,\n      part: null,\n      label: \"The 144,000 of the sealed\"\n    },\n    {\n      chapter: 15,\n      part: null,\n      label: \"Song of Moses and the Lamb\"\n    },\n    {\n      chapter: 16,\n      part: null,\n      label: \"Judgment of 7 bowls\"\n    },\n    {\n      chapter: 17,\n      part: null,\n      label: \"Judgment for the great Prostitute\"\n    },\n    {\n      chapter: 18,\n      part: null,\n      label: \"Judgment for the great Babylon\"\n    },\n    {\n      chapter: 19,\n      part: \"a\",\n      label: \"Marriage supper of the Lamb\"\n    },\n    {\n      chapter: 19,\n      part: \"b\",\n      label: \"The Rider on a white horse (King of kings, Lord of lords)\"\n    },\n    {\n      chapter: 19,\n      part: \"c\",\n      label: \"Lake-of-fire judgment for the Beast and False Prophet\"\n    },\n    {\n      chapter: 20,\n      part: \"a\",\n      label: \"Millennial Kingdom\"\n    },\n    {\n      chapter: 20,\n      part: \"b\",\n      label: \"Lake-of-fire judgment for Satan and unbelievers\"\n    },\n    {\n      chapter: 21,\n      part: null,\n      label: \"New Heaven and a New Earth, New Jerusalem\"\n    },\n    {\n      chapter: 22,\n      part: null,\n      label: \"Reigning with Jesus forever, \\\"Come, Lord Jesus!\\\"\"\n    },\n  ]\n};\n\n\nexport const BMC_DATA : BmcLibrary = {\n  contents: [\n    BMC_GENESIS,\n    BMC_EXODUS,\n    BMC_LEVITICUS,\n    BMC_NUMBERS,\n    BMC_DEUTERONOMY,\n    BMC_JOSHUA,\n    BMC_JUDGES,\n    BMC_RUTH,\n    BMC_1_SAMUEL,\n    BMC_2_SAMUEL,\n    BMC_1_KINGS,\n    BMC_2_KINGS,\n    BMC_1_CHRONICLES,\n    BMC_2_CHRONICLES,\n    BMC_MATTHEW,\n    BMC_MARK,\n    BMC_LUKE,\n    BMC_JOHN,\n    BMC_ACTS,\n    BMC_ROMANS,\n    BMC_REVELATION,\n  ]\n};\n","import React from 'react';\nimport {\n  SafeAreaView,\n  Text,\n} from 'react-native';\nimport { NavigationStackProp } from 'react-navigation-stack';\nimport BmcDiagram from './BmcDiagram';\nimport InstructionsBar from './InstructionsBar';\nimport TopBar from './TopBar';\nimport * as BMC from './BmcData';\n\n\ntype StudyScreenProps = {\n  navigation: NavigationStackProp<{ book: string }>;\n}\n\n\ntype StudyScreenState = {\n}\n\n\nexport default class StudyScreen\nextends React.Component<StudyScreenProps, StudyScreenState> {\n\n  constructor(props: StudyScreenProps) {\n    super(props);\n    this.state = {}\n  }\n\n  render() {\n    const bookName = this.props.navigation.getParam(\"book\");\n    const book = BMC.BMC_DATA.contents.find(b => b.title === bookName);\n    if (book === undefined) return <Text>Internal Error</Text>;\n    return (\n      <SafeAreaView\n        style={{\n          flex: 1,\n          flexDirection: \"column\",\n        }}\n        >\n        <TopBar\n          navigation={this.props.navigation as unknown as NavigationStackProp}\n          text={bookName}\n          onBackIfWeb={() => this.props.navigation.navigate(\"BookAction\", { book: bookName })}\n          />\n        <InstructionsBar\n          text={\"Drag labels to the diagram:\"} />\n        <BmcDiagram book={bookName} testMode={true} testHints={true} />\n      </SafeAreaView>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  Text,\n  TouchableHighlight,\n  View\n} from 'react-native';\nimport STYLES from './Styles';\n\n\ntype BookChooserProps = {\n  items: string[];\n  onChoose?: (book: string) => void;\n}\n\n\ntype BookChooserState = {\n}\n\n\nexport default class BookChooser\nextends React.Component<BookChooserProps, BookChooserState> {\n\n  constructor(props: BookChooserProps) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  render() {\n    return (\n      <View\n        style={[STYLES.actionList, {\n          alignItems: \"flex-start\",\n          flexDirection: \"column\",\n        }]}\n      >\n      {this.props.items.map((item, i) => {\n        return (\n          <TouchableHighlight\n            key={item}\n            onPress={e => {\n              if (this.props.onChoose) this.props.onChoose(item);\n            }}\n            >\n            <Text style={STYLES.actionListItem}>{item}</Text>\n          </TouchableHighlight>\n        )\n      })}\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  SafeAreaView,\n  ScrollView,\n} from 'react-native';\nimport { NavigationStackProp } from 'react-navigation-stack';\nimport TopBar from './TopBar';\n\nimport BookChooser from './BookChooser';\nimport * as BMC from './BmcData';\n\ntype HomeScreenProps = {\n  navigation: NavigationStackProp;\n}\n\ntype HomeScreenState = {\n}\n\nexport default class HomeScreen\nextends React.Component<HomeScreenProps, HomeScreenState> {\n\n  bookItems: string[];\n\n  constructor(props: HomeScreenProps) {\n    super(props);\n    this.bookItems = BMC.BMC_DATA.contents.map(b => b.title);\n    this.state = {}\n    this.handleBookChoose = this.handleBookChoose.bind(this);\n  }\n\n\n  handleBookChoose(book: string) {\n    this.props.navigation.navigate(\"BookAction\", { book: book });\n  }\n\n\n  render() {\n    return (\n      <SafeAreaView style={{ flex: 1 }}>\n        <TopBar\n          hideBack={true}\n          navigation={this.props.navigation as unknown as NavigationStackProp}\n          text={\"Choose a book to study\"}\n          />\n        <ScrollView>\n          <BookChooser\n            items={this.bookItems}\n            onChoose={this.handleBookChoose}\n            />\n        </ScrollView>\n      </SafeAreaView>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  GestureResponderEvent,\n  NativeSyntheticEvent,\n  Platform,\n  Text,\n  TextInput,\n  TextInputChangeEventData,\n  TextInputKeyPressEventData,\n  TextInputProps,\n  TextStyle,\n  TouchableWithoutFeedback,\n  View,\n  ViewStyle\n} from 'react-native';\n\n\n// TODO: Redo this from byLetter to bySegment, so that it is more\n// flexible. This way, also backspace would work better, since currently\n// it has problems if the word contains \"-\" and it is byLetter.\n// TODO: Account for keyboard distance, especially on small devices\n\n\ntype FirstLetterTextInputProps = {\n  allowBackspace?: boolean;\n  allowSynonyms?: boolean;\n  autoFocus?: boolean;\n  displayAll?: boolean;\n  readOnly?: boolean;\n  viewStyle?: ViewStyle | (ViewStyle | undefined)[];\n  correctStyle?: TextStyle | (TextStyle | undefined)[];\n  incorrectStyle?: TextStyle | (TextStyle | undefined)[];\n  unseenStyle?: TextStyle | (TextStyle | undefined)[];\n  optionalWords?: string[];\n  text: string;\n  onCompletion?: () => void;\n  onTopBackspace?: () => void;\n  onBackspace?: () => void;\n  onCorrectInput?: () => void;\n  onIncorrectInput?: () => void;\n}\n\n\ntype FirstLetterTextInputState = {\n  index: number;\n  charIndex: number;\n  correct: boolean[][];\n  triggered: boolean[];\n  keyPressCount: number;\n}\n\n\ntype FirstLetterTextInputWord = {\n  word: string;\n  byLetter: boolean;\n  skip: boolean;\n  optional: boolean;\n  showOnlyIfTriggered: boolean;\n}\n\n\ntype FirstLetterTextInputDoNextWordResult = {\n  index: number;\n  charIndex: number;\n  wasCorrect: boolean;\n  reachedEnd: boolean;\n}\n\n\ntype Synonyms = {\n  synonyms: string[];\n  unidirectional?: boolean;\n}\n\n\nconst FIRST_LETTER_SYNONYMS: Synonyms[] = [\n  {\n    synonyms: [\"0\", \"zero\"],\n  },\n  {\n    synonyms: [\"1\", \"one\"],\n  },\n  {\n    synonyms: [\"2\", \"two\"],\n  },\n  {\n    synonyms: [\"3\", \"three\"],\n  },\n  {\n    synonyms: [\"4\", \"four\"],\n  },\n  {\n    synonyms: [\"5\", \"five\"],\n  },\n  {\n    synonyms: [\"6\", \"six\"],\n  },\n  {\n    synonyms: [\"7\", \"seven\"],\n  },\n  {\n    synonyms: [\"8\", \"eight\"],\n  },\n  {\n    synonyms: [\"9\", \"nine\"],\n  },\n  {\n    synonyms: [\"10\", \"ten\"],\n  },\n  {\n    synonyms: [\"11\", \"eleven\"],\n  },\n  {\n    synonyms: [\"12\", \"twelve\"],\n  },\n  {\n    synonyms: [\"13\", \"thirteen\"],\n  },\n  {\n    synonyms: [\"14\", \"fourteen\"],\n  },\n  {\n    synonyms: [\"I\", \"1st\", \"first\"],\n    unidirectional: true,\n  },\n  {\n    synonyms: [\"II\", \"2nd\", \"second\"],\n    unidirectional: true,\n  },\n  {\n    synonyms: [\"III\", \"3rd\", \"third\"],\n    unidirectional: true,\n  },\n  {\n    synonyms: [\"IV\", \"4th\", \"fourth\"],\n    unidirectional: true,\n  },\n  {\n    synonyms: [\"1st\", \"first\"],\n  },\n  {\n    synonyms: [\"2nd\", \"second\"],\n  },\n  {\n    synonyms: [\"3rd\", \"third\"],\n  },\n  {\n    synonyms: [\"4th\", \"fourth\"],\n  },\n  {\n    synonyms: [\"5th\", \"fifth\"],\n  },\n  {\n    synonyms: [\"6th\", \"sixth\"],\n  },\n  {\n    synonyms: [\"7th\", \"seventh\"],\n  },\n  {\n    synonyms: [\"8th\", \"eighth\"],\n  },\n  {\n    synonyms: [\"9th\", \"ninth\"],\n  },\n  {\n    synonyms: [\"10th\", \"tenth\"],\n  },\n  {\n    synonyms: [\"11th\", \"eleventh\"],\n  },\n  {\n    synonyms: [\"12th\", \"twelfth\"],\n  },\n];\n\n\nexport default class FirstLetterTextInput\nextends React.Component<FirstLetterTextInputProps, FirstLetterTextInputState> {\n\n  words: FirstLetterTextInputWord[];\n  input: TextInput | null;\n  editlockLocked: boolean;\n  editlockTimeMS: number;\n  editlockTimeoutMS: number;\n  editlockTimeoutSafetyMS: number;\n\n  constructor(props: FirstLetterTextInputProps) {\n    super(props);\n\n    this.input = null;\n\n    this.editlockLocked = false;\n    this.editlockTimeMS = 0;\n    this.editlockTimeoutMS = 25;\n    this.editlockTimeoutSafetyMS = 100;\n\n    const textParts = props.text\n      .replace(/---/g, \"\\u2014\")     // &mdash;\n      .replace(/ -- /g, \" \\u2013 \")  // &ndash;\n      .replace(/--/g, \"\\u2014\")      // &mdash;\n      .split(/(?=[ /\\u2013\\u2014-])/g);\n    const n = textParts.length;\n    let words = new Array<FirstLetterTextInputWord>(n);\n    for (let i = 0; i < n; i++) {\n      let w = textParts[i];\n      if (w.length > 0 && i > 0) {\n        let t = w.charAt(0);\n        w = w.substr(1);\n        words[i - 1].word += t;\n      }\n\n      let byLetter = !!w.match(/^[^a-z]+$/)\n        && !w.match(/^[^A-Z0-9]*[A-Z0-9][^A-Z0-9]*$/);\n      let showOnlyIfTriggered = !byLetter\n        && !!w.match(/^\\[.+\\][,;:]?[ ]?$/);\n      let optional: boolean =\n        (!byLetter && !!this.props.optionalWords\n          && this.props.optionalWords.find(\n            s => w.toLowerCase() === s.toLowerCase()) !== undefined)\n        || showOnlyIfTriggered;   // [optional] word\n\n      words[i] = {\n        byLetter: byLetter,\n        skip: !!w.match(/^[^A-Za-z0-9]*$/),\n        optional: optional,\n        showOnlyIfTriggered: showOnlyIfTriggered,\n        word: w,\n      }\n    }\n\n    this.words = words;\n    this.state = {\n      index: 0,\n      charIndex: 0,\n      correct: new Array<boolean[]>(n),\n      triggered: new Array<boolean>(n),\n      keyPressCount: 0,\n    }\n\n    this.handlePress = this.handlePress.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n  }\n\n  backspace(suppressTopBackspace: boolean = false) {\n\n    let charIndex = this.state.charIndex;\n    let index = this.state.index;\n\n    while (true) {\n\n      if (charIndex > 0) {\n        charIndex--;\n      }\n      else if (index > 0) {\n        index--;\n        let prevWord = this.words[index];\n        if (prevWord.byLetter && prevWord.word.length > 0) {\n          charIndex = prevWord.word.length - 1;\n        }\n        else {\n          charIndex = 0;\n        }\n      }\n      else {\n        this.setState({\n          index: index,\n          charIndex: charIndex,\n        });\n\n        if (this.props.onTopBackspace !== undefined\n          && !suppressTopBackspace) {\n          // TODO Call this asynchronously?\n          this.props.onTopBackspace();\n        }\n\n        return;\n      }\n\n      let w = this.words[index];\n      if (w.skip) continue;\n      if (w.showOnlyIfTriggered) {\n        if (!this.state.triggered[index]) continue;\n      }\n      if (w.byLetter) {\n        if (w.word.charAt(charIndex).match(/[A-Za-z0-9]/)) break;\n      }\n      else {\n        break;\n      }\n    }\n\n    this.setState({\n      index: index,\n      charIndex: charIndex,\n    });\n  }\n\n  focus() {\n    if (this.input != null) {\n      this.input.focus();\n    }\n  }\n\n  handlePress(event: GestureResponderEvent) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.focus();\n  }\n\n  handleChange(event: NativeSyntheticEvent<TextInputChangeEventData>) {\n    event.stopPropagation();\n    event.preventDefault();\n    let key = event.nativeEvent.text.toLowerCase();\n    this.handleKey(key);\n  }\n\n  handleKeyPress(event: NativeSyntheticEvent<TextInputKeyPressEventData>) {\n    event.stopPropagation();\n    event.preventDefault();\n    let key = event.nativeEvent.key.toLowerCase();\n    this.handleKey(key);\n  }\n\n  temporaryEventLock() {\n    let t = (new Date()).getTime();\n    this.editlockTimeMS = t;\n    this.editlockLocked = true;\n    setTimeout(\n      () => { this.editlockLocked = false; },\n      this.editlockTimeoutMS);\n  }\n\n  findNextCharacter(s: string, start: number) : [string, number] {\n    for (let i = start; i < s.length; i++) {\n      const c = s.charAt(i);\n      if (c.match(/[a-z0-9]/i)) {\n        return [c, i];\n      }\n    }\n    return [\"\", s.length];\n  }\n\n  updateCorrectState(correctState: boolean[][], index: number,\n    value: boolean, from: number = 0, to: number = -1) {\n    const word = this.words[index];\n    if (!correctState[index]) {\n      correctState[index] = new Array<boolean>(word.word.length);\n    }\n    if (word.byLetter) {\n      if (to <= 0 || to > correctState[index].length) {\n        to = correctState[index].length;\n      }\n      for (let i = from; i < to; i++) {\n        correctState[index][i] = value;\n      }\n    }\n    else {\n      for (let i = 0; i < correctState[index].length; i++) {\n        correctState[index][i] = value;\n      }\n    }\n  }\n\n  doNextWord(index: number, charIndex: number, key: string,\n    correctState: boolean[][], triggeredState: boolean[])\n    : FirstLetterTextInputDoNextWordResult {\n\n    if (index >= this.words.length) {\n      return {\n        index: this.words.length,\n        charIndex: 0,\n        wasCorrect: false,\n        reachedEnd: true,\n      }\n    }\n\n    let word = this.words[index];\n    let wordLowerCase = word.word.toLowerCase();\n    let originalIndex = index;\n    let originalCharIndex = charIndex;\n\n    let [nextWordCharacter, nextWordCharacterIndex]\n      = this.findNextCharacter(wordLowerCase, charIndex);\n    let [nextNextWordCharacter, nextNextWordCharacterIndex]\n      = this.findNextCharacter(wordLowerCase, nextWordCharacterIndex + 1);\n\n\n    // Determine whether the input is correct.\n\n    let matches = key === nextWordCharacter || nextWordCharacter === \"\";\n\n\n    // Check the synonyms if we are at the beginning of the word.\n\n    let forceAdvanceToNextWord = false;\n    if (!matches && charIndex === 0 && this.props.allowSynonyms) {\n      for (let i = 0; i < FIRST_LETTER_SYNONYMS.length && !matches; i++) {\n        const synonyms = FIRST_LETTER_SYNONYMS[i];\n        for (let j = 0;\n          j < (synonyms.unidirectional ? 1 : synonyms.synonyms.length)\n            && !matches;\n          j++) {\n\n          // See if the synonym matches the current word.\n\n          const m = synonyms.synonyms[j].toLowerCase();\n          if (wordLowerCase.substr(nextWordCharacterIndex).startsWith(m)\n            && (wordLowerCase.length === nextWordCharacterIndex + m.length\n              || !wordLowerCase.charAt(nextWordCharacterIndex + m.length)\n                .match(/[a-z0-9]/i))) {\n\n            // Check to make sure we matched the whole word\n\n            let [n] = this.findNextCharacter(wordLowerCase,\n              nextWordCharacterIndex + m.length);\n            if (n !== \"\") continue;\n\n            // Now try to match the key press with the other synonyms.\n\n            for (let k = 0; k < synonyms.synonyms.length && !matches; k++) {\n              if (k === j) continue;\n\n              // See if the key press matches.\n\n              const w = synonyms.synonyms[k].toLowerCase();\n              if (key === w.charAt(0)) {\n                matches = true;\n                forceAdvanceToNextWord = true;\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n\n    // Mark the state accordingly.\n\n    this.updateCorrectState(correctState, index, matches, charIndex,\n      forceAdvanceToNextWord ? -1 : nextNextWordCharacterIndex);\n\n    triggeredState[index] = true;\n    if (!matches && word.showOnlyIfTriggered) {\n      triggeredState[index] = false;\n    }\n\n\n    // Advance to the next word or a part of the word.\n\n    let nextWord = false;\n    if (word.byLetter && !forceAdvanceToNextWord) {\n      if (nextNextWordCharacter === \"\") {\n        index++;\n        charIndex = 0;\n        nextWord = true;\n      }\n      else {\n        charIndex = nextNextWordCharacterIndex;\n      }\n    }\n    else {\n      index++;\n      charIndex = 0;\n      nextWord = true;\n    }\n\n\n    // Ensure that the next word is actually a word, not just\n    // something that will be skipped entirely.\n\n    if (nextWord) {\n      while (index < this.words.length && this.words[index].skip) {\n        this.updateCorrectState(correctState, index, true);\n        index++;\n      }\n    }\n\n\n    // Check if this is an optional word, in which case maybe\n    // we should revisit the decision to mark this word wrong.\n\n    if (!matches && !word.byLetter && word.optional) {\n\n      // Speculatively look ahead to the next word. Note that we don't\n      // allow the last word to be an optional word at this point\n      // because we lack the ability to check the word on the next\n      // instance of this object (if there is one).\n\n      const r = this.doNextWord(index, charIndex, key, correctState,\n        triggeredState);\n      if (r.wasCorrect) {\n        this.updateCorrectState(correctState, originalIndex, true,\n          originalCharIndex, nextNextWordCharacterIndex);\n        triggeredState[originalIndex] = false;\n        return r;\n      }\n      else if (word.showOnlyIfTriggered) {\n        return this.doNextWord(index, charIndex, key, correctState,\n          triggeredState);\n      }\n    }\n\n\n    // Compose the return object.\n\n    return {\n      index: index,\n      charIndex: charIndex,\n      wasCorrect: matches,\n      reachedEnd: index >= this.words.length,\n    }\n  }\n\n  handleKey(key: string) {\n\n    if (this.editlockLocked) {\n      let t = (new Date()).getTime();\n      if (this.editlockTimeMS + this.editlockTimeoutSafetyMS < t) {\n        this.editlockLocked = false;\n      }\n      else {\n        return;\n      }\n    }\n    else {\n      this.temporaryEventLock();\n    }\n\n    this.setState((s) => { return { keyPressCount: s.keyPressCount + 1 }});\n\n    if (key === \"backspace\" && this.props.allowBackspace) {\n      this.backspace();\n      if (this.props.onBackspace !== undefined) {\n        this.props.onBackspace();\n      }\n    }\n\n    if (key.length === 1 && key.match(/[a-z0-9]/i)) {\n      if (this.state.index >= this.words.length) return;\n\n\n      // Process the next word\n\n      let correctState = this.state.correct.slice(0);\n      let triggeredState = this.state.triggered.slice(0);\n      let r = this.doNextWord(this.state.index,\n        this.state.charIndex, key, correctState, triggeredState);\n\n\n      // Update the state and call callbacks.\n      // TODO Do callbacks asynchronously?\n\n      this.setState({\n        index: r.index,\n        charIndex: r.charIndex,\n        correct: correctState,\n        triggered: triggeredState,\n      });\n\n      if (r.reachedEnd) {\n        if (this.props.onCompletion !== undefined) {\n          this.props.onCompletion();\n        }\n      }\n\n      if (r.wasCorrect && this.props.onCorrectInput !== undefined) {\n        this.props.onCorrectInput();\n      }\n\n      if (!r.wasCorrect && this.props.onIncorrectInput !== undefined) {\n        this.props.onIncorrectInput();\n      }\n    }\n  }\n\n  render() {\n    const isAndroidWeb = navigator && navigator.userAgent\n      ? navigator.userAgent.indexOf(\"Android\") >= 0 : false;\n    const readOnly = this.props.readOnly !== undefined && this.props.readOnly;\n    const platformDependentProps:TextInputProps =\n      Platform.OS === \"web\" ? {} : {\n        autoCompleteType: \"off\"\n      };\n    /*const currentWord = this.state.index < this.words.length\n      ? this.words[this.state.index] : null;*/\n    const style = {\n      correct: {\n        color: \"black\"\n      },\n      incorrect: {\n        color: \"red\"\n      },\n      unseen: {\n        color: \"#AAA\"\n      },\n    }\n    return (\n      <TouchableWithoutFeedback onPress={this.handlePress}>\n      <View\n        style={[this.props.viewStyle, {\n          alignItems: 'flex-start',\n          flexDirection: 'row',\n          flexShrink: 1,\n          flexWrap: 'wrap',\n          padding: 4,\n        }]}\n      >\n        <Text></Text>\n        {this.words.map((w, i) => {\n          if (w.showOnlyIfTriggered && w.word.length > 0) {\n            if (!this.state.triggered[i]) return null;\n          }\n          if (w.byLetter) {\n            if (i > this.state.index) return null;\n            return (\n              <Text key={i}>{\n                w.word.split(\"\").map((c, j) => {\n                  let correct = this.state.correct[i]\n                    && this.state.correct[i][j];\n                  if (i === this.state.index\n                    && j >= this.state.charIndex) return null;\n                  return <Text key={j}\n                    style={[\n                      correct ? style.correct : style.incorrect,\n                      correct ? this.props.correctStyle\n                        : this.props.incorrectStyle,\n                    ]}\n                    >{w.word[j]}</Text>\n                }\n              )\n            }</Text>)\n          }\n          else {\n            if (i >= this.state.index) return null;\n            let correct = this.state.correct[i] && this.state.correct[i][0];\n            return (\n              <Text\n                key={i}\n                style={[\n                  correct ? style.correct : style.incorrect,\n                  correct ? this.props.correctStyle\n                    : this.props.incorrectStyle,\n                ]}\n                  >{w.word}</Text>\n            )\n          }\n        })}\n        {readOnly ? null : (\n            <TextInput\n              ref={r => this.input = r}\n              style={[{\n                margin: 0,\n                padding: 0,\n                width: 5,\n              },\n              Platform.OS === \"android\"\n                && this.state.index === this.words.length\n                ? { color: \"#00000000\" } : undefined,\n              Platform.OS === \"android\"\n                ? { height: 18 /* XXX do not hardcode! */ } : undefined]}\n              onKeyPress={this.handleKeyPress}\n              onChange={this.handleChange}\n              autoCorrect={false}\n              autoFocus={this.props.autoFocus}\n              editable={true}\n              selectTextOnFocus={false}\n              caretHidden={false}\n              value={\"\"}\n              maxLength={isAndroidWeb || Platform.OS === \"android\" ? 1 : 0}\n              secureTextEntry={false}\n              textContentType={\"none\"}\n              autoCapitalize={\"characters\"}\n              {...platformDependentProps}\n              />\n          )\n        }\n        {this.words.map((w, i) => {\n          if (i < this.state.index) return null;\n          if (w.showOnlyIfTriggered) return null;\n          let fromIndex = (i === this.state.index\n            && this.words[this.state.index].byLetter)\n            ? this.state.charIndex : 0;\n          let shiftLeft = i === this.state.index;\n          for (let j = i - 1; j >= this.state.index; j--) {\n            if (!this.words[j].showOnlyIfTriggered) break;\n            if (j === this.state.index) shiftLeft = true;\n          }\n          let last = i === this.words.length - 1;\n          return (\n            <Text key={i}\n              selectable={this.props.displayAll}\n              style={[\n                {\n                  color: this.props.displayAll ? \"inherit\" : \"#00000000\",\n                  marginLeft: shiftLeft && !readOnly ? -5 : 0,\n                  minWidth: last ? 5 : undefined,\n                },\n                this.props.displayAll ? style.unseen : null,\n                this.props.displayAll ? this.props.unseenStyle : null,\n              ]}\n              >{w.word.substr(fromIndex)}</Text>\n          )\n        })}\n      </View>\n      </TouchableWithoutFeedback>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  Text,\n  TextStyle,\n  View\n} from 'react-native';\nimport FirstLetterTextInput from './FirstLetterTextInput';\nimport * as BMC from './BmcData';\nimport STYLES from './Styles';\n\n\n// TODO: Print notes (e.g. for John)\n// TODO: Indent numerical sublists (e.g. for the beatitudes in Matthew)\n\n\ntype BmcTextInputProps = {\n  allowBackspace?: boolean;\n  allowSynonyms?: boolean;\n  autoFocus?: boolean;\n  displayAllItems?: boolean;\n  displayAllTextInItem?: boolean;\n  everythingEditable?: boolean;\n  optionalWords?: string[];\n  items: BMC.BmcItem[];\n  correctStyle?: TextStyle;\n  incorrectStyle?: TextStyle;\n  unseenStyle?: TextStyle;\n  headingStyle?: TextStyle;\n  onBackspace?: () => void;\n  onCorrectInput?: () => void;\n  onIncorrectInput?: () => void;\n}\n\n\ntype BmcTextInputState = {\n  index: number;\n  previousIndex: number | null;\n}\n\n\ntype BmcTextInputElement = {\n  addSpace: boolean;\n  index: number;\n  input?: FirstLetterTextInput;\n  isHeading: boolean;\n  item: BMC.BmcItem;\n}\n\n\nexport default class BmcTextInput\nextends React.Component<BmcTextInputProps, BmcTextInputState> {\n\n  elements: BmcTextInputElement[];\n\n  constructor(props: BmcTextInputProps) {\n    super(props);\n\n    let n = this.props.items.length;\n    for (let i = 0; i < this.props.items.length; i++) {\n      let h = this.props.items[i].heading;\n      if (h !== undefined && h !== null && h !== \"\") n++;\n    }\n\n    this.elements = new Array<BmcTextInputElement>(n);\n    let j = 0;\n    for (let i = 0; i < this.props.items.length; i++) {\n      let h = this.props.items[i].heading;\n      if (h !== undefined && h !== null && h !== \"\") {\n        this.elements[j++] = {\n          index: i,\n          item: this.props.items[i],\n          isHeading: true,\n          addSpace: true,\n        }\n      }\n      this.elements[j++] = {\n        index: i,\n        item: this.props.items[i],\n        isHeading: false,\n        addSpace: h === \"\",\n      }\n    }\n\n    this.state = {\n      index: 0,\n      previousIndex: null,\n    }\n  }\n\n\n  createInput(i: number, label: string, isHeading: boolean) {\n    const headingStyle: TextStyle = this.props.headingStyle || {\n      fontWeight: \"bold\",\n      //textDecoration: \"underline\",\n    };\n    return <FirstLetterTextInput\n      ref={r => {\n        if (r != null && this.elements[i]) this.elements[i].input = r;\n      }}\n      allowBackspace={this.props.allowBackspace}\n      allowSynonyms={this.props.allowBackspace}\n      autoFocus={this.props.autoFocus && this.state.index === i}\n      correctStyle={isHeading\n        ? [headingStyle, this.props.correctStyle] : [this.props.correctStyle] }\n      incorrectStyle={isHeading\n        ? [headingStyle, this.props.incorrectStyle] : [this.props.incorrectStyle] }\n      unseenStyle={isHeading\n        ? [headingStyle, this.props.unseenStyle] : [this.props.unseenStyle] }\n      viewStyle={STYLES.testView}\n      displayAll={this.props.displayAllTextInItem}\n      readOnly={!(this.props.everythingEditable\n        || this.state.index === i\n        || this.state.previousIndex === i)}\n      optionalWords={this.props.optionalWords}\n      text={label}\n      onCompletion={() => {\n        if (i + 1 < this.elements.length) {\n          this.setState({\n            index: i + 1,\n            previousIndex: i\n          }, () => {\n            // We need to hand off the focus to the next input element\n            // while the old one still exists, and only then we can\n            // clean up the old one. Otherwise the keyboard (at least\n            // on iOS) would flicker and occassionally switch from\n            // a third-party keyboard to the system keyboard.\n            setTimeout(() => {\n              let input = this.elements[i + 1].input;\n              if (input) input.focus();\n              setTimeout(() => {\n                // XXX Doing this will still cause some flicker!\n                //this.setState({ previousIndex: null });\n              }, 25);\n            }, 25);\n          });\n        }\n      }}\n      onTopBackspace={() => {\n        if (i > 0) {\n          this.setState({\n            index: i - 1,\n            previousIndex: i\n          }, () => {\n            setTimeout(() => {\n              let input = this.elements[i - 1].input;\n              if (input) {\n                input.backspace(true /* suppressTopBackspace */);\n                input.focus();\n              }\n              // XXX Doing this will still cause some flicker!\n              //(async () => this.setState({ previousIndex: null }))();\n            }, 25);\n          });\n        }\n      }}\n      onBackspace={this.props.onBackspace}\n      onCorrectInput={this.props.onCorrectInput}\n      onIncorrectInput={this.props.onIncorrectInput}\n    />\n  }\n\n\n  render() {\n    return (\n      <View\n        style={[{}, {\n          alignItems: \"flex-start\",\n          flexDirection: \"column\",\n        }]}\n      >\n      {this.elements.map((element, i) => {\n        if (!this.props.displayAllItems) {\n          // XXX This causes the keyboard to flicker on backspace\n          if (i > this.state.index) return null;\n        }\n\n        let item = element.item;\n        if (element.isHeading) {\n          return <View\n            key={i}\n            style={{\n              alignItems: \"stretch\",\n              flexDirection: \"row\",\n              paddingTop: !element.addSpace ? 0 : (i === 0 ? 6 : 12),\n            }}\n            >\n            <Text style={[STYLES.bmcTextChapter, { width: 55 }]}></Text>\n            {item.heading && item.heading !== \"\"\n              ? this.createInput(i, item.heading, true)\n              : null}\n          </View>\n        }\n\n        let s = \"\";\n        let withChapter = false;\n        if (element.index === 0) {\n          s += item.chapter;\n          withChapter = true;\n        }\n        else {\n          const previous = this.props.items[element.index-1];\n          if (previous.chapter !== item.chapter) {\n            s += item.chapter;\n            withChapter = true;\n          }\n        }\n        if (item.part) s += item.part;\n        if (s !== \"\") {\n          if (!withChapter && s.match(/^[0-9]+$/)) {\n            s += \")\";\n          }\n          else {\n            s += \".\";\n          }\n        }\n        return (\n          <View\n            key={i}\n            style={{\n              alignItems: \"stretch\",\n              flexDirection: \"row\",\n              paddingTop: !element.addSpace ? 0 : (i === 0 ? 6 : 12),\n            }}\n            >\n            <Text\n              style={[STYLES.bmcTextChapter, {\n                flexShrink: 0,\n                textAlign: \"right\",\n              }]}\n              >{s + \"  \"}</Text>\n              {this.createInput(i, item.label, false)}\n          </View>\n        )\n      })}\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  KeyboardAvoidingView,\n  Platform,\n} from 'react-native';\n\n\ntype MyKeyboardAvoidingViewProps = {\n}\n\n\ntype MyKeyboardAvoidingViewState = {\n}\n\n\nexport default class MyKeyboardAvoidingView\nextends React.Component<MyKeyboardAvoidingViewProps,\n  MyKeyboardAvoidingViewState> {\n\n  constructor(props: MyKeyboardAvoidingViewProps) {\n    super(props);\n    this.state = {}\n  }\n\n  render() {\n    if (Platform.OS === \"web\") {\n      if (!this.props.children) return null;\n      let a = React.Children.map(this.props.children, c => c);\n      if (!a || a.length === 0) return null;\n      return a[0];\n    }\n    else {\n      return (\n        <KeyboardAvoidingView\n          behavior={Platform.OS === \"android\" ? undefined : \"padding\"}>\n          {this.props.children}\n        </KeyboardAvoidingView>\n      );\n    }\n  }\n}\n","import React from 'react';\nimport {\n  SafeAreaView,\n  ScrollView,\n  Text,\n} from 'react-native';\nimport { NavigationStackProp } from 'react-navigation-stack';\nimport BmcDiagram from './BmcDiagram';\nimport BmcTextInput from './BmcTextInput';\nimport InstructionsBar from './InstructionsBar';\nimport MyKeyboardAvoidingView from './MyKeyboardAvoidingView';\nimport TopBar from './TopBar';\nimport * as BMC from './BmcData';\nimport STYLES from './Styles';\n\n\ntype StudyScreenProps = {\n  navigation: NavigationStackProp<{ book: string }>;\n}\n\n\ntype StudyScreenState = {\n}\n\n\nexport default class StudyScreen\nextends React.Component<StudyScreenProps, StudyScreenState> {\n\n  constructor(props: StudyScreenProps) {\n    super(props);\n    this.state = {}\n  }\n\n  render() {\n    const bookName = this.props.navigation.getParam(\"book\");\n    const book = BMC.BMC_DATA.contents.find(b => b.title === bookName);\n    if (book === undefined) return <Text>Internal Error</Text>;\n    return (\n      <SafeAreaView\n        style={{\n          flex: 1,\n          flexDirection: \"column\",\n        }}\n        >\n        <TopBar\n          navigation={this.props.navigation as unknown as NavigationStackProp}\n          text={bookName}\n          onBackIfWeb={() => this.props.navigation.navigate(\"BookAction\", { book: bookName })}\n          />\n        <InstructionsBar\n          text={\"Type just the first letter; spell out everything in all caps:\"} />\n        <MyKeyboardAvoidingView>\n          <ScrollView\n            style={{\n              flexGrow: 1,\n            }}\n            keyboardShouldPersistTaps={\"handled\"}\n            >\n            <BmcDiagram book={bookName} />\n            <BmcTextInput\n              allowBackspace={true}\n              allowSynonyms={true}\n              displayAllItems={true}\n              displayAllTextInItem={true}\n              everythingEditable={true}\n              optionalWords={[\"a\", \"an\", \"the\"]}\n              headingStyle={STYLES.studyHeadingStyle}\n              correctStyle={STYLES.studyCorrectStyle}\n              unseenStyle={STYLES.studyUnseenStyle}\n              items={book.items}\n              />\n          </ScrollView>\n        </MyKeyboardAvoidingView>\n      </SafeAreaView>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  Animated,\n  SafeAreaView,\n  ScrollView,\n  Text,\n} from 'react-native';\nimport { NavigationStackProp } from 'react-navigation-stack';\nimport BmcTextInput from './BmcTextInput';\nimport InstructionsBar from './InstructionsBar';\nimport MyKeyboardAvoidingView from './MyKeyboardAvoidingView';\nimport TopBar from './TopBar';\nimport STYLES from './Styles';\nimport * as BMC from './BmcData';\n\n\ntype TestScreenProps = {\n  navigation: NavigationStackProp<{ book: string }>;\n}\n\n\ntype TestScreenState = {\n  incorrectStreak: number;\n}\n\n\nexport default class TestScreen\nextends React.Component<TestScreenProps, TestScreenState> {\n\n  shakeAnimation: Animated.Value;\n\n  constructor(props: TestScreenProps) {\n    super(props);\n    this.shakeAnimation = new Animated.Value(0);\n    this.state = {\n      incorrectStreak: 0,\n    };\n  }\n\n  shake() {\n    const DURATION = 75;\n    const EXTENT = 4;\n    const RIGHT = {\n      toValue: EXTENT,\n      duration: DURATION,\n      useNativeDriver: true\n    };\n    const LEFT = {\n      toValue: -EXTENT,\n      duration: DURATION,\n      useNativeDriver: true\n    };\n    Animated.sequence([\n      Animated.timing(this.shakeAnimation, RIGHT),\n      Animated.timing(this.shakeAnimation, LEFT ),\n      Animated.timing(this.shakeAnimation, RIGHT),\n      Animated.timing(this.shakeAnimation, LEFT ),\n      Animated.timing(this.shakeAnimation, RIGHT),\n      Animated.timing(this.shakeAnimation, LEFT ),\n    ]).start();\n  }\n\n  render() {\n    const bookName = this.props.navigation.getParam(\"book\");\n    const book = BMC.BMC_DATA.contents.find(b => b.title === bookName);\n    if (book === undefined) return <Text>Internal Error</Text>;\n    return (\n      <SafeAreaView\n        style={{\n          flex: 1,\n          flexDirection: \"column\",\n        }}\n        >\n        <TopBar\n          navigation={this.props.navigation as unknown as NavigationStackProp}\n          text={bookName}\n          onBackIfWeb={() => this.props.navigation.navigate(\"BookAction\", { book: bookName })}\n          />\n        <InstructionsBar\n          text={\"Type just the first letter; spell out everything in all caps:\"} />\n        <MyKeyboardAvoidingView>\n          <ScrollView\n            style={{\n              flexGrow: 1,\n            }}\n            keyboardShouldPersistTaps={\"handled\"}\n            >\n            <BmcTextInput\n              allowBackspace={false}\n              allowSynonyms={true}\n              autoFocus={true}\n              displayAllItems={false}\n              displayAllTextInItem={false}\n              optionalWords={[\"a\", \"an\", \"the\"]}\n              items={book.items}\n              onBackspace={() => this.setState({ incorrectStreak: 0 })}\n              onCorrectInput={() => this.setState({ incorrectStreak: 0 })}\n              onIncorrectInput={() => {\n                this.setState(\n                  state => ({ incorrectStreak: state.incorrectStreak + 1 }),\n                  () => {\n                    if (this.state.incorrectStreak >= 4\n                     && (this.state.incorrectStreak - 4) % 3 === 0) {\n                      this.shake();\n                    }\n                  }\n                );\n              }}\n              />\n            {this.state.incorrectStreak >= 3 &&\n              <Animated.View style={{\n                transform: [{ translateX: this.shakeAnimation }]\n              }}>\n                <Text style={STYLES.testWarningMessage}>\n                  &nbsp;Type just the first letter.\n                </Text>\n              </Animated.View>}\n          </ScrollView>\n        </MyKeyboardAvoidingView>\n      </SafeAreaView>\n    );\n  }\n}\n","import BookActionScreen from './BookActionScreen';\nimport DiagramScreen from './DiagramScreen';\nimport HomeScreen from './HomeScreen';\nimport StudyScreen from './StudyScreen';\nimport TestScreen from './TestScreen';\n\n// @ts-ignore\n// eslint-disable-next-line\nimport { createSwitchNavigator } from \"@react-navigation/core\";\n// @ts-ignore\n// eslint-disable-next-line\nimport { createBrowserApp } from '@react-navigation/web';\n\n\nconst routes: {} = {\n  Home: {screen: HomeScreen},\n  BookAction: {screen: BookActionScreen},\n  Diagram: {screen: DiagramScreen},\n  Study: {screen: StudyScreen},\n  Test: {screen: TestScreen},\n}\n\nconst MainNavigator = createSwitchNavigator(routes, {\n  backBehavior: \"history\",\n});\n\nconst App = createBrowserApp(MainNavigator, {\n  history: \"hash\"\n});\nexport default App;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport App from './App';\n\nReactDom.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}